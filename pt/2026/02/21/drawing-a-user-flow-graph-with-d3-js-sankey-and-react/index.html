<!DOCTYPE html><html lang="pt" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Astro v5.17.3"><title>Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React - Bernardo Dias da Cruz</title><meta name="description" content="Usando diagramas Sankey para documentar comportamento de software, onde cada variação no fluxo do usuário cria ramificações."><link rel="canonical" href="https://bernardodiasdacruz.com/pt/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/"><meta name="twitter:site" content="@bernardodiasc"><meta name="twitter:title" content="Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React"><meta name="twitter:description" content="Usando diagramas Sankey para documentar comportamento de software, onde cada variação no fluxo do usuário cria ramificações."><meta name="twitter:creator" content="@bernardodiasc"><meta name="twitter:image" content="https://bernardodiasdacruz.com/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"><meta property="og:title" content="Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React"><meta property="og:type" content="article"><meta property="og:url" content="https://bernardodiasdacruz.com/pt/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/"><meta property="og:image" content="https://bernardodiasdacruz.com/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"><meta property="og:description" content="Usando diagramas Sankey para documentar comportamento de software, onde cada variação no fluxo do usuário cria ramificações."><meta property="og:site_name" content="Bernardo Dias da Cruz"><link rel="shortcut icon" href="/favicon.ico"><meta name="google-site-verification" content="w8owtTJwheQ0pp3DJ-bwIKX67nyi2bdCZs8fLs-r-Wc"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=IBM+Plex+Serif:wght@400&family=Permanent+Marker&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/_title_.CGcNIkLq.css">
<style>.share[data-astro-cid-ung7bpju]{font-size:var(--meta-size);display:flex;gap:.75em;margin-bottom:1em}.share__button[data-astro-cid-ung7bpju]{opacity:.5;transition:opacity .4s ease-out;color:var(--heading-color);font-size:.85em}.share__button[data-astro-cid-ung7bpju]:hover{opacity:1;text-decoration:underline}.post-details[data-astro-cid-bangc7to]{font-size:var(--text-size);padding:2em 2em 4em}.disqus[data-astro-cid-r2x3s5wt]{font-size:var(--text-size);padding:2em}
.icon[data-astro-cid-patnjmll]{fill:currentColor;width:100%;height:100%;display:block}
.text-block{font-size:var(--text-size);width:100%;overflow:inherit}.text-block h1,.text-block h2,.text-block h3,.text-block h4,.text-block h5,.text-block h6{font-family:var(--heading-family);color:var(--heading-color);font-weight:var(--heading-weight);line-height:var(--heading-line)}.text-block h1{font-size:var(--heading-level1-size);margin:var(--heading-level1-margins)}.text-block h2{font-size:var(--heading-level2-size);margin:var(--heading-level2-margins);padding-bottom:.3em;border-bottom:1px solid var(--line-light)}.text-block h3{font-size:var(--heading-level3-size);margin:var(--heading-level3-margins);text-transform:uppercase}.text-block h4{font-size:var(--heading-level4-size);margin:var(--heading-level4-margins);font-weight:var(--heading-weight-bold)}.text-block h5{font-size:var(--heading-level5-size);margin:var(--heading-level5-margins)}.text-block h6{font-size:var(--heading-level6-size);margin:var(--heading-level6-margins)}.text-block p{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);word-wrap:break-word;margin:0 0 1em;text-align:justify;hyphens:auto}.text-block a{color:inherit;background-image:linear-gradient(to bottom,transparent 37%,var(--link-background) 37%);background-size:100% 300%;background-position:0 10%;transition-property:background-position;transition-duration:.4s;outline:none}.text-block a:hover{background-position:0 100%}.text-block blockquote{border-left:10px solid var(--code-background);margin:30px 0;padding:0 0 0 25px}.text-block pre{background:var(--pre-background);color:var(--pre-color);padding:1.3em 2em;margin:.5em -2em 1.2em;line-height:1;overflow-x:auto}.text-block code{background:var(--code-background);padding:.1em .3em .2em;color:var(--code-color);border-radius:2px;font-size:.9em}.text-block pre code{background:unset;color:inherit;padding:0;font-size:.8em;white-space:pre}.text-block ul,.text-block ol{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);margin:.5em 0 1.2em 1em;padding:0 0 0 1em}.text-block ul{list-style:initial}.text-block ol{list-style:decimal}.text-block ul ul,.text-block ol ol{margin-bottom:.5em}.text-block li{margin:0}.text-block ul ul li{list-style:circle}.text-block ul ul ul li{list-style:square}.text-block hr{margin:3rem 0;height:1px;border:none;border-bottom:1px solid var(--line-heavy)}.text-block table{display:block;width:100%;overflow:auto}.text-block table tr{background-color:#fff;border-top:1px solid var(--line-heavy)}.text-block table tr:nth-child(2n){background-color:#f8f8f8}.text-block table th{font-weight:600}.text-block table th,.text-block table td{padding:.5em 1em;border:1px solid var(--line-light)}.text-block table td{font-weight:var(--text-weight)}.text-block img{max-width:100%}.text-block figure{margin:1.5em 0;text-align:center}.text-block figcaption{font-size:var(--meta-size);color:var(--meta-color);font-style:italic;text-align:center}.text-block iframe{margin:2em auto;display:block}.text-block>:first-child{margin-top:0}.text-block>:last-child{margin-bottom:0}
.post-header[data-astro-cid-yl355ysp]{font-size:var(--text-size)}.post-header__title[data-astro-cid-yl355ysp]{color:var(--heading-color);font-size:var(--heading-level1-size);margin:0 0 .3em}.post-header--listing[data-astro-cid-yl355ysp] .post-header__title[data-astro-cid-yl355ysp]{font-size:var(--heading-level2-size)}.post-header--listing[data-astro-cid-yl355ysp]:hover .post-header__title[data-astro-cid-yl355ysp]{text-decoration:underline}.post-header__icon[data-astro-cid-yl355ysp]{flex-shrink:0;display:inline-block;height:.8em;width:.8em;margin:0 4px 0 0;transform:translateY(3px)}.post-header--details[data-astro-cid-yl355ysp] .post-header__icon[data-astro-cid-yl355ysp]{height:1em;width:1em;margin:0 5px 0 0}.post-header__meta[data-astro-cid-yl355ysp]{color:var(--meta-color);font-size:var(--meta-size);margin:0 0 1em}.post-header__category[data-astro-cid-yl355ysp]{margin:0 0 .5em}.post-header__category-link[data-astro-cid-yl355ysp]{color:var(--heading-color)}.post-header__category-link[data-astro-cid-yl355ysp]:hover{color:var(--text-color);text-decoration:underline}.post-header__excerpt[data-astro-cid-yl355ysp]{color:var(--text-color)}
</style><style>.codepen[data-astro-cid-gzkyidnt]{width:100%}
</style><style>.animation[data-astro-cid-hzra33yf]{margin-bottom:20px}
</style><style>.sankey-chart[data-astro-cid-zf374n66]{margin:2em 0;width:100%}.sankey-container[data-astro-cid-zf374n66]{width:100%;overflow-x:auto}.sankey-container[data-astro-cid-zf374n66] svg[data-astro-cid-zf374n66]{display:block;margin:0 auto;max-width:100%;height:auto}.sankey-caption[data-astro-cid-zf374n66]{text-align:center;color:var(--meta-color, #888);font-size:.85em;margin-top:.5em}
</style></head> <body data-astro-cid-sckkx6r4> <main class="layout" data-astro-cid-sckkx6r4> <header class="layout__header" data-astro-cid-sckkx6r4> <h1 class="layout__header-title" data-astro-cid-sckkx6r4> <a href="/pt/" data-astro-cid-sckkx6r4>Random Thoughts</a> </h1> <nav class="layout__nav" data-astro-cid-sckkx6r4> <ul class="tabs" data-astro-cid-xlvzfuxv> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/pt/" title="Últimos posts" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/pt/search" title="Buscar conteúdo" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zm0-8.9c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.19 12.19l-8.19 3.81 3.81-8.19 8.19-3.81-3.81 8.19z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/pt/archive" title="Arquivo de conteúdo" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/pt/about-me" title="Sobre mim" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M21,13A9,9 0 0,1 12,22A9,9 0 0,1 3,13L3.03,4.43C5.68,2.88 8.76,2 12.05,2C15.3,2 18.36,2.87 21,4.38V13M13,19.93C16.39,19.44 19,16.5 19,13V5.59C16.9,4.57 14.54,4 12.05,4C9.5,4 7.08,4.6 4.94,5.66L5,13C5,16.5 7.63,19.44 11,19.93V18H13V19.93M11,16H8L6,13L9,14H10L11,13H13L14,14H15L18,13L16,16H13L12,15L11,16M6,9.03C6.64,8.4 7.5,8.05 8.5,8.05C9.45,8.05 10.34,8.4 11,9.03C10.34,9.65 9.45,10 8.5,10C7.5,10 6.64,9.65 6,9.03M13,9.03C13.64,8.4 14.5,8.05 15.5,8.05C16.45,8.05 17.34,8.4 18,9.03C17.34,9.65 16.45,10 15.5,10C14.5,10 13.64,9.65 13,9.03Z" data-astro-cid-patnjmll></path></svg> </a> </li> </ul>  <a href="/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/" class="lang-switch" title="English" data-astro-cid-64r42zdf> <span class="lang-switch__current" data-astro-cid-64r42zdf>PT</span> <span class="lang-switch__separator" data-astro-cid-64r42zdf>/</span> <span class="lang-switch__other" data-astro-cid-64r42zdf>EN</span> </a>  </nav> </header> <article class="layout__content" data-astro-cid-sckkx6r4> <div class="layout__content-inner" data-astro-cid-sckkx6r4>  <div class="post-details" data-astro-cid-bangc7to> <div class="post-header post-header--details" data-astro-cid-yl355ysp><p class="post-header__category" data-astro-cid-yl355ysp><a href="/category/frontend" class="post-header__category-link" data-astro-cid-yl355ysp><span class="post-header__icon" data-astro-cid-yl355ysp><svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M18,15H16V17H18M18,11H16V13H18M20,19H12V17H14V15H12V13H14V11H12V9H20M10,7H8V5H10M10,11H8V9H10M10,15H8V13H10M10,19H8V17H10M6,7H4V5H6M6,11H4V9H6M6,15H4V13H6M6,19H4V17H6M12,7V3H2V21H22V7H12Z" data-astro-cid-patnjmll></path></svg></span>Frontend architecture</a></p><h1 class="post-header__title" data-astro-cid-yl355ysp>Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React</h1><p class="post-header__meta" data-astro-cid-yl355ysp>Friday, February 20, 2026</p></div> <div class="share" data-astro-cid-ung7bpju><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbernardodiasdacruz.com%2Fpt%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Facebook" data-astro-cid-ung7bpju>Facebook</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbernardodiasdacruz.com%2Fpt%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&title=Desenhando%20um%20gr%C3%A1fico%20de%20fluxo%20do%20usu%C3%A1rio%20com%20D3.js%20Sankey%20e%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on LinkedIn" data-astro-cid-ung7bpju>LinkedIn</a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbernardodiasdacruz.com%2Fpt%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&text=Desenhando%20um%20gr%C3%A1fico%20de%20fluxo%20do%20usu%C3%A1rio%20com%20D3.js%20Sankey%20e%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Twitter" data-astro-cid-ung7bpju>Twitter</a><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fbernardodiasdacruz.com%2Fpt%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&title=Desenhando%20um%20gr%C3%A1fico%20de%20fluxo%20do%20usu%C3%A1rio%20com%20D3.js%20Sankey%20e%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Reddit" data-astro-cid-ung7bpju>Reddit</a></div> <div class="text-block">   <figure><img alt="Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React" src="/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"/></figure>
<blockquote>
<p>Este post estava como rascunho desde o início de 2019. Começou como um projeto paralelo — um experimento sobre usar diagramas Sankey para documentar comportamento de software. Eu construí uma prova de conceito rudimentar com D3.js, escrevi metade de um blog post sobre isso, e então a vida aconteceu. A ideia nunca saiu da minha cabeça, mas eu nunca consegui terminar. Avançando para agora, a IA me ajudou a finalizar — construindo o componente, elaborando os exemplos, terminando a escrita. Ainda é muito experimental e cheio de arestas, mas é bom finalmente publicar algo que estava acumulando poeira há quase sete anos.</p>
</blockquote>
<p>Você já tentou documentar como os usuários navegam por uma funcionalidade na sua aplicação? Fluxogramas e árvores de decisão funcionam bem para casos simples, mas quando você começa a mapear todos os caminhos possíveis — com confirmações, casos extremos e resultados se ramificando — as coisas ficam bagunçadas rapidamente.</p>
<p>Tenho experimentado com diagramas Sankey como uma forma alternativa de representar fluxos de usuário, e os resultados são bem interessantes. Aqui está um exemplo — um pipeline de CI/CD onde um único push de código se expande em verificações paralelas, converge no build, se ramifica novamente em testes de staging, e flui pela revisão até a produção:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;commit&#34;,&#34;name&#34;:&#34;Code Push&#34;},{&#34;id&#34;:&#34;lint&#34;,&#34;name&#34;:&#34;Lint&#34;},{&#34;id&#34;:&#34;unit&#34;,&#34;name&#34;:&#34;Unit Tests&#34;},{&#34;id&#34;:&#34;types&#34;,&#34;name&#34;:&#34;Type Check&#34;},{&#34;id&#34;:&#34;security&#34;,&#34;name&#34;:&#34;Security Scan&#34;},{&#34;id&#34;:&#34;build&#34;,&#34;name&#34;:&#34;Build&#34;},{&#34;id&#34;:&#34;preview&#34;,&#34;name&#34;:&#34;Preview Deploy&#34;},{&#34;id&#34;:&#34;staging&#34;,&#34;name&#34;:&#34;Staging Deploy&#34;},{&#34;id&#34;:&#34;e2e&#34;,&#34;name&#34;:&#34;E2E Tests&#34;},{&#34;id&#34;:&#34;smoke&#34;,&#34;name&#34;:&#34;Smoke Tests&#34;},{&#34;id&#34;:&#34;perf&#34;,&#34;name&#34;:&#34;Load Tests&#34;},{&#34;id&#34;:&#34;review&#34;,&#34;name&#34;:&#34;Code Review&#34;},{&#34;id&#34;:&#34;approved&#34;,&#34;name&#34;:&#34;Approved&#34;},{&#34;id&#34;:&#34;rejected&#34;,&#34;name&#34;:&#34;Changes Needed&#34;},{&#34;id&#34;:&#34;production&#34;,&#34;name&#34;:&#34;Production Deploy&#34;},{&#34;id&#34;:&#34;canary&#34;,&#34;name&#34;:&#34;Canary (10%)&#34;},{&#34;id&#34;:&#34;full&#34;,&#34;name&#34;:&#34;Full Rollout&#34;},{&#34;id&#34;:&#34;monitor&#34;,&#34;name&#34;:&#34;Monitoring&#34;}]" data-links="[{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;lint&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;unit&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;types&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;security&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;lint&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;unit&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;types&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;security&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;build&#34;,&#34;target&#34;:&#34;preview&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;build&#34;,&#34;target&#34;:&#34;staging&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;e2e&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;smoke&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;perf&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;e2e&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;smoke&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;perf&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;preview&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;review&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;review&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;production&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;production&#34;,&#34;target&#34;:&#34;canary&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;production&#34;,&#34;target&#34;:&#34;full&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;canary&#34;,&#34;target&#34;:&#34;monitor&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;full&#34;,&#34;target&#34;:&#34;monitor&#34;,&#34;value&#34;:4}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  <script type="module" src="/_astro/SankeyChart.astro_astro_type_script_index_0_lang.DcFzhntW.js"></script>
<h2 id="por-que-diagramas-sankey">Por que diagramas Sankey?</h2>
<p>Diagramas Sankey são tradicionalmente usados para visualizar fluxos de energia, materiais ou dinheiro — onde a largura de cada link representa a magnitude do fluxo. Mas se você pensar bem, fluxos de usuários através de software são estruturalmente similares: há um ponto de entrada, uma série de ações possíveis e múltiplos resultados. Variações no comportamento naturalmente criam ramificações.</p>
<p>O que torna o Sankey particularmente útil para documentar comportamento de software é que você pode ver todos os caminhos possíveis de uma vez, da inicialização ao resultado final. Diferente de um fluxograma onde você segue um caminho por vez, um diagrama Sankey te dá a visão completa: onde os fluxos convergem, onde divergem, e como diferentes ações levam a diferentes resultados.</p>
<p>A experiência do usuário é fundamentalmente sobre um ser humano se movendo através do tempo e espaço. Uma pessoa senta em frente a uma tela, e daquele momento em diante, cada toque, clique ou rolagem é um passo em uma jornada que só se move em uma direção. Ela pode apertar o botão de voltar, claro. Pode retornar à tela inicial. Mas não é mais a mesma pessoa que era antes — ela já viu coisas, fez escolhas, formou expectativas. O estado da interface pode parecer idêntico, mas o momento no tempo é diferente. A experiência nunca rebobina.</p>
<p>Isso é algo que tendemos a ignorar quando modelamos comportamento de software. Desenhamos diagramas com setas indo e voltando, como se o usuário estivesse pulando entre estados em um espaço atemporal. Mas a verdade está mais perto de um rio: ele pode se ramificar, pode se alargar, pode se dividir ao redor de obstáculos, mas a água nunca flui rio acima. Diagramas Sankey são tradicionalmente usados para fluxos bidirecionais — energia circulando por um sistema, dinheiro circulando entre contas. Mas para experiência do usuário, o fluxo é unidirecional. O tempo só avança, e assim também avança a jornada de cada usuário por um sistema. Esse é o insight chave por trás de usar Sankey dessa forma: cada caminho pelo diagrama representa uma experiência possível se desdobrando no tempo, da esquerda para a direita, do início ao fim.</p>
<h2 id="o-conceito">O conceito</h2>
<p>Tome um checkout de e-commerce como exemplo. Da página inicial da loja, os usuários podem descobrir produtos através de busca ou navegação. Após visualizar um produto e adicioná-lo ao carrinho, eles escolhem como se autenticar — checkout como visitante, fazer login ou se registrar. Então escolhem um método de pagamento, e o fluxo termina com um pedido confirmado ou um pagamento recusado. Um diagrama Sankey unidirecional mapeia isso bem através das etapas:</p>
<ol>
<li><strong>Entrada</strong> — O ponto de partida (visitar a loja)</li>
<li><strong>Descoberta</strong> — Como o usuário encontra o que quer (busca, navegação)</li>
<li><strong>Interesse</strong> — Engajando com o produto</li>
<li><strong>Carrinho</strong> — Se comprometendo com uma compra</li>
<li><strong>Conta</strong> — Escolhendo um caminho de autenticação</li>
<li><strong>Pagamento</strong> — Selecionando um método de pagamento</li>
<li><strong>Resultado</strong> — Sucesso ou falha</li>
</ol>
<p>Cada etapa flui para a próxima, e o padrão de ramificação revela como um único ponto de entrada se expande em múltiplos estados finais possíveis. Você imediatamente vê quais caminhos convergem (busca e navegação ambos levam à página do produto), onde divergem (três opções de autenticação), e como diferentes escolhas ultimamente levam aos mesmos resultados.</p>
<p>Perceba como o diagrama se lê como o próprio tempo. O usuário que navega e depois faz login chega ao formulário de cartão de crédito em um estado mental diferente daquele que buscou e fez checkout como visitante — mesmo olhando para a mesma tela. O Sankey captura isso: eles estão em caminhos diferentes, com histórias diferentes, chegando ao que apenas aparenta ser o mesmo lugar. A posição no diagrama não é apenas uma tela — é um momento na experiência de alguém.</p>
<p>Aqui está o exemplo do fluxo de checkout em ação:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;visit&#34;,&#34;name&#34;:&#34;Visit Store&#34;},{&#34;id&#34;:&#34;search&#34;,&#34;name&#34;:&#34;Search&#34;},{&#34;id&#34;:&#34;browse&#34;,&#34;name&#34;:&#34;Browse&#34;},{&#34;id&#34;:&#34;product&#34;,&#34;name&#34;:&#34;Product Page&#34;},{&#34;id&#34;:&#34;cart&#34;,&#34;name&#34;:&#34;Add to Cart&#34;},{&#34;id&#34;:&#34;guest&#34;,&#34;name&#34;:&#34;Guest Checkout&#34;},{&#34;id&#34;:&#34;signin&#34;,&#34;name&#34;:&#34;Sign In&#34;},{&#34;id&#34;:&#34;register&#34;,&#34;name&#34;:&#34;Register&#34;},{&#34;id&#34;:&#34;card&#34;,&#34;name&#34;:&#34;Credit Card&#34;},{&#34;id&#34;:&#34;paypal&#34;,&#34;name&#34;:&#34;PayPal&#34;},{&#34;id&#34;:&#34;confirmed&#34;,&#34;name&#34;:&#34;Order Confirmed&#34;},{&#34;id&#34;:&#34;declined&#34;,&#34;name&#34;:&#34;Payment Declined&#34;}]" data-links="[{&#34;source&#34;:&#34;visit&#34;,&#34;target&#34;:&#34;search&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;visit&#34;,&#34;target&#34;:&#34;browse&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;search&#34;,&#34;target&#34;:&#34;product&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;browse&#34;,&#34;target&#34;:&#34;product&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;product&#34;,&#34;target&#34;:&#34;cart&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;guest&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;signin&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;register&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;guest&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;guest&#34;,&#34;target&#34;:&#34;paypal&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;signin&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;signin&#34;,&#34;target&#34;:&#34;paypal&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;register&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;card&#34;,&#34;target&#34;:&#34;confirmed&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;card&#34;,&#34;target&#34;:&#34;declined&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;paypal&#34;,&#34;target&#34;:&#34;confirmed&#34;,&#34;value&#34;:2}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  
<h2 id="d3js-e-d3-sankey">D3.js e d3-sankey</h2>
<p>Para a implementação, eu comecei experimentando com <a href="https://d3js.org/">D3.js</a> e o <a href="https://github.com/Neilos/bihisankey">plugin biHiSankey do Neilos</a>, que suporta nós hierárquicos colapsáveis e links bidirecionais. Foi uma ótima prova de conceito, mas para um fluxo de usuário unidirecional limpo, o módulo padrão <a href="https://github.com/d3/d3-sankey">d3-sankey</a> se mostrou uma escolha melhor — API mais simples, melhor manutenção, e projetado exatamente para layouts de fluxo da esquerda para a direita. E conceitualmente, remover a capacidade bidirecional pareceu certo. A experiência do usuário não flui para trás. O diagrama também não deveria.</p>
<p>O modelo de dados é direto. Nós representam estados ou ações, e links os conectam:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">  nodes</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Visit Store&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Search&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Browse&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Product Page&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Add to Cart&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Guest Checkout&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Sign In&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Register&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Credit Card&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;PayPal&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Order Confirmed&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;declined&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Payment Declined&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#E06C75">  links</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;declined&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span></code></pre>
<p>Cada nó recebe um <code>id</code> e um <code>name</code> legível por humanos. Links definem o fluxo entre nós, e a propriedade <code>value</code> controla a espessura de cada conexão — você poderia usar valores uniformes para focar puramente na estrutura, ou valores proporcionais para representar volume real de tráfego.</p>
<p>O layout d3-sankey lida com o posicionamento automaticamente, organizando nós em colunas pela sua profundidade (distância da origem) e desenhando caminhos curvos entre eles.</p>
<h2 id="funcionalidades-interativas">Funcionalidades interativas</h2>
<p>Uma das coisas mais legais sobre renderizar isso com D3 é a interatividade. Ao passar o mouse sobre um nó, todos os caminhos conectados são destacados — traçando o fluxo completo tanto para cima quanto para baixo — enquanto esmaece todo o resto. Isso torna muito fácil responder perguntas como “o que acontece depois que o usuário clica em Sign In?” ou “quais caminhos levam a um pagamento recusado?”</p>
<p>De certa forma, a interação de hover te permite fazer algo que o usuário nunca pode: viajar de volta no tempo. Você escolhe um momento no fluxo e instantaneamente vê tudo que levou até ele e tudo que segue. O usuário viveu isso para frente, um passo de cada vez. Você vê a história toda de uma vez.</p>
<h2 id="o-componente">O componente</h2>
<p>Configurar o layout Sankey com d3-sankey é bem limpo. Você configura os parâmetros do layout e deixa ele calcular as posições dos nós e caminhos dos links:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">sankey</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">sankeyLinkHorizontal</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">sankeyLeft</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> &quot;d3-sankey&quot;</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> sankeyLayout</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> sankey</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeId</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> d</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeWidth</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodePadding</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">14</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeAlign</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">sankeyLeft</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">extent</span><span style="color:#ABB2BF">([[</span><span style="color:#E5C07B">margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">left</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">top</span><span style="color:#ABB2BF">], [</span><span style="color:#E06C75">width</span><span style="color:#56B6C2"> -</span><span style="color:#E5C07B"> margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">right</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">height</span><span style="color:#56B6C2"> -</span><span style="color:#E5C07B"> margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">bottom</span><span style="color:#ABB2BF">]]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> graph</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> sankeyLayout</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">  nodes</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">nodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> ({ ...</span><span style="color:#E06C75">d</span><span style="color:#ABB2BF"> })),</span></span>
<span class="line"><span style="color:#E06C75">  links</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> ({ ...</span><span style="color:#E06C75">d</span><span style="color:#ABB2BF"> })),</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>
<p>Para a interação de hover, eu traço recursivamente todos os links conectados em ambas as direções a partir do nó sob o mouse:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> getConnected</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">node</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> connectedLinks</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Set</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> connectedNodes</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Set</span><span style="color:#ABB2BF">([</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  function</span><span style="color:#61AFEF"> traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">n</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">    graph</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">forEach</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">l</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#56B6C2"> ===</span><span style="color:#E06C75"> n</span><span style="color:#56B6C2"> &amp;&amp;</span><span style="color:#56B6C2"> !</span><span style="color:#E5C07B">connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">has</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#E5C07B">        connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">        connectedNodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">        traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    });</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  function</span><span style="color:#61AFEF"> traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">n</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">    graph</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">forEach</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">l</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#56B6C2"> ===</span><span style="color:#E06C75"> n</span><span style="color:#56B6C2"> &amp;&amp;</span><span style="color:#56B6C2"> !</span><span style="color:#E5C07B">connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">has</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#E5C07B">        connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">        connectedNodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">        traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    });</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">  traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">connectedLinks</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">connectedNodes</span><span style="color:#ABB2BF"> };</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Depois é só uma questão de ajustar opacidades no hover para esmaecer os elementos não conectados e destacar os conectados.</p>
<h2 id="onde-isso-pode-chegar">Onde isso pode chegar</h2>
<p>Os exemplos de checkout e CI/CD acima são apenas pontos de partida. Uma vez que você começa a pensar sobre comportamento de software como um fluxo através do tempo, quase qualquer sistema pode ser mapeado dessa forma. Aqui estão algumas direções que eu acho empolgantes:</p>
<p><strong>Especificações de funcionalidades e análise de complexidade.</strong> Antes de escrever uma única linha de código, mapeie todos os caminhos possíveis do usuário através de uma funcionalidade. O diagrama revela imediatamente complexidade oculta — casos extremos que você não havia considerado, estados mais difíceis de alcançar, caminhos que convergem de formas inesperadas. É tanto uma ferramenta de design quanto de documentação.</p>
<p><strong>QA e cobertura de testes.</strong> Sobreponha dados de cobertura de testes no fluxo. Quais caminhos têm testes automatizados? Quais são cobertos apenas por QA manual? Quais nunca foram testados? O visual torna as lacunas óbvias de uma forma que uma porcentagem de cobertura nunca conseguiria.</p>
<p><strong>Analytics e dados reais de usuários.</strong> Substitua os valores de exemplo por números reais de tráfego. De repente você vê não apenas o que os usuários podem fazer, mas o que eles realmente fazem — quais caminhos são rodovias, quais são estradas de terra, e quais são becos sem saída que ninguém usa. A espessura de cada link conta uma história sobre comportamento humano real.</p>
<p><strong>Pipelines de resposta a incidentes.</strong> Desde o disparo do alerta passando por triagem, investigação, mitigação e post-mortem. Múltiplas fontes de monitoramento alimentam a classificação de severidade, se ramificam por trilhas de investigação paralelas, e convergem na resolução. Todo incidente é uma jornada no tempo, e nenhum segue exatamente o mesmo caminho.</p>
<p><strong>Fulfillment de pedidos de e-commerce.</strong> O ciclo de vida completo desde a colocação do pedido passando por verificações de fraude, roteamento de estoque, picking no armazém, seleção de transportadora, e resultados de entrega. Um único pedido se ramifica dependendo da disponibilidade de estoque, método de envio, e uma dúzia de outras variáveis — cada ramificação representando uma experiência diferente para o cliente esperando do outro lado.</p>
<p><strong>Ciclo de vida de uma requisição de API.</strong> Uma única requisição HTTP fluindo por toda sua stack — desde o tipo de cliente passando por CDN, load balancer, autenticação, rate limiting, tratamento de rotas, fontes de dados e montagem da resposta. Cada requisição é uma pequena jornada no tempo, e o Sankey revela quantos caminhos diferentes existem através do que parece ser uma simples chamada de API.</p>
<p><strong>Publicação e moderação de conteúdo.</strong> Desde a criação do conteúdo passando por verificações automatizadas, revisão humana, preparação, distribuição multicanal, e rastreamento de engajamento. Diferentes tipos de conteúdo seguem caminhos diferentes pela moderação, convergem no agendamento, se expandem pelos canais de distribuição, e fluem para métricas de engajamento. Aqui está como isso se parece com 36 nós:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;article&#34;,&#34;name&#34;:&#34;Write Article&#34;},{&#34;id&#34;:&#34;video&#34;,&#34;name&#34;:&#34;Upload Video&#34;},{&#34;id&#34;:&#34;image&#34;,&#34;name&#34;:&#34;Upload Image&#34;},{&#34;id&#34;:&#34;comment&#34;,&#34;name&#34;:&#34;Post Comment&#34;},{&#34;id&#34;:&#34;ai-scan&#34;,&#34;name&#34;:&#34;AI Content Scan&#34;},{&#34;id&#34;:&#34;spam&#34;,&#34;name&#34;:&#34;Spam Filter&#34;},{&#34;id&#34;:&#34;nsfw&#34;,&#34;name&#34;:&#34;NSFW Detection&#34;},{&#34;id&#34;:&#34;plagiarism&#34;,&#34;name&#34;:&#34;Plagiarism Check&#34;},{&#34;id&#34;:&#34;auto-ok&#34;,&#34;name&#34;:&#34;Auto-Approved&#34;},{&#34;id&#34;:&#34;flagged&#34;,&#34;name&#34;:&#34;Flagged for Review&#34;},{&#34;id&#34;:&#34;auto-reject&#34;,&#34;name&#34;:&#34;Auto-Rejected&#34;},{&#34;id&#34;:&#34;editorial&#34;,&#34;name&#34;:&#34;Editorial Review&#34;},{&#34;id&#34;:&#34;legal&#34;,&#34;name&#34;:&#34;Legal Review&#34;},{&#34;id&#34;:&#34;community&#34;,&#34;name&#34;:&#34;Community Mod&#34;},{&#34;id&#34;:&#34;senior&#34;,&#34;name&#34;:&#34;Senior Editor&#34;},{&#34;id&#34;:&#34;approved&#34;,&#34;name&#34;:&#34;Approved&#34;},{&#34;id&#34;:&#34;revision&#34;,&#34;name&#34;:&#34;Revision Requested&#34;},{&#34;id&#34;:&#34;rejected&#34;,&#34;name&#34;:&#34;Rejected&#34;},{&#34;id&#34;:&#34;seo&#34;,&#34;name&#34;:&#34;SEO Optimization&#34;},{&#34;id&#34;:&#34;thumbnail&#34;,&#34;name&#34;:&#34;Thumbnail Generation&#34;},{&#34;id&#34;:&#34;transcode&#34;,&#34;name&#34;:&#34;Transcoding&#34;},{&#34;id&#34;:&#34;schedule&#34;,&#34;name&#34;:&#34;Scheduling&#34;},{&#34;id&#34;:&#34;website&#34;,&#34;name&#34;:&#34;Website&#34;},{&#34;id&#34;:&#34;email&#34;,&#34;name&#34;:&#34;Email Newsletter&#34;},{&#34;id&#34;:&#34;rss&#34;,&#34;name&#34;:&#34;RSS Feed&#34;},{&#34;id&#34;:&#34;social&#34;,&#34;name&#34;:&#34;Social Media&#34;},{&#34;id&#34;:&#34;push&#34;,&#34;name&#34;:&#34;Push Notification&#34;},{&#34;id&#34;:&#34;views&#34;,&#34;name&#34;:&#34;Views &#38; Reads&#34;},{&#34;id&#34;:&#34;likes&#34;,&#34;name&#34;:&#34;Likes &#38; Shares&#34;},{&#34;id&#34;:&#34;comments&#34;,&#34;name&#34;:&#34;Comments&#34;},{&#34;id&#34;:&#34;saves&#34;,&#34;name&#34;:&#34;Saves &#38; Bookmarks&#34;},{&#34;id&#34;:&#34;trending&#34;,&#34;name&#34;:&#34;Trending&#34;},{&#34;id&#34;:&#34;steady&#34;,&#34;name&#34;:&#34;Steady Performance&#34;},{&#34;id&#34;:&#34;low&#34;,&#34;name&#34;:&#34;Low Engagement&#34;},{&#34;id&#34;:&#34;violation&#34;,&#34;name&#34;:&#34;Violation Reported&#34;},{&#34;id&#34;:&#34;archived&#34;,&#34;name&#34;:&#34;Content Archived&#34;}]" data-links="[{&#34;source&#34;:&#34;article&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;article&#34;,&#34;target&#34;:&#34;plagiarism&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;video&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;video&#34;,&#34;target&#34;:&#34;nsfw&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;image&#34;,&#34;target&#34;:&#34;nsfw&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;image&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;comment&#34;,&#34;target&#34;:&#34;spam&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;comment&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;spam&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;spam&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;plagiarism&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;plagiarism&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;seo&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;thumbnail&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;transcode&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;editorial&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;legal&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;community&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;senior&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;editorial&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;editorial&#34;,&#34;target&#34;:&#34;revision&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;legal&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;legal&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;community&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;community&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;senior&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;seo&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;thumbnail&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;transcode&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;seo&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:12},{&#34;source&#34;:&#34;thumbnail&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;transcode&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;website&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;email&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;rss&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;social&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;push&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;website&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;website&#34;,&#34;target&#34;:&#34;comments&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;email&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;email&#34;,&#34;target&#34;:&#34;likes&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;rss&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;rss&#34;,&#34;target&#34;:&#34;saves&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;social&#34;,&#34;target&#34;:&#34;likes&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;social&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;push&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;push&#34;,&#34;target&#34;:&#34;saves&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;trending&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;low&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;likes&#34;,&#34;target&#34;:&#34;trending&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;likes&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;comments&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;comments&#34;,&#34;target&#34;:&#34;violation&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;saves&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;low&#34;,&#34;target&#34;:&#34;archived&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;violation&#34;,&#34;target&#34;:&#34;archived&#34;,&#34;value&#34;:1}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  
<p>Você pode conferir o experimento original em D3 v3 aqui: <a href="https://github.com/bernardodiasc/hello-world/tree/master/my-d3-diagrams">Hello World: D3.js</a>. O componente embutido neste post usa o módulo mais moderno d3-sankey, que eu acho ser a melhor escolha para este caso de uso.</p>   </div>  </div>  <div class="disqus" id="disqus_thread" data-astro-cid-r2x3s5wt></div> <script>(function(){const identifier = "pt-2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react";
const title = "Desenhando um gráfico de fluxo do usuário com D3.js Sankey e React";
const url = "https://bernardodiasdacruz.com/pt/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/";

  if (window.location.hostname !== 'localhost') {
    window.disqus_config = function () {
      this.page.url = url;
      this.page.identifier = identifier;
      this.page.title = title;
    };
    const d = document;
    const s = d.createElement('script');
    s.src = 'https://bernardodiasc.disqus.com/embed.js';
    s.setAttribute('data-timestamp', String(+new Date()));
    (d.head || d.body).appendChild(s);
  }
})();</script>   </div> </article> </main> <script>
      if (window.location.hostname !== 'localhost') {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-10219275-4');
      }
    </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10219275-4"></script> </body> </html> 