<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Astro v5.17.3"><title>Drawing a user flow graph with D3.js Sankey and React - Bernardo Dias da Cruz</title><meta name="description" content="Using Sankey diagrams to document software behavior, where each variation in user flow creates branches downstream."><link rel="canonical" href="https://bernardodiasdacruz.com/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/"><meta name="twitter:site" content="@bernardodiasc"><meta name="twitter:title" content="Drawing a user flow graph with D3.js Sankey and React"><meta name="twitter:description" content="Using Sankey diagrams to document software behavior, where each variation in user flow creates branches downstream."><meta name="twitter:creator" content="@bernardodiasc"><meta name="twitter:image" content="https://bernardodiasdacruz.com/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"><meta property="og:title" content="Drawing a user flow graph with D3.js Sankey and React"><meta property="og:type" content="article"><meta property="og:url" content="https://bernardodiasdacruz.com/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/"><meta property="og:image" content="https://bernardodiasdacruz.com/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"><meta property="og:description" content="Using Sankey diagrams to document software behavior, where each variation in user flow creates branches downstream."><meta property="og:site_name" content="Bernardo Dias da Cruz"><link rel="shortcut icon" href="/favicon.ico"><meta name="google-site-verification" content="w8owtTJwheQ0pp3DJ-bwIKX67nyi2bdCZs8fLs-r-Wc"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=IBM+Plex+Serif:wght@400&family=Permanent+Marker&display=swap" rel="stylesheet"><style>:root{--main-background: #104493;--content-background: #fff;--text-family: "IBM Plex Serif", serif;--text-color: #2f2f2f;--text-size: 1.125rem;--text-weight: 400;--text-line: 1.7;--heading-family: "Cairo", sans-serif;--heading-color: #2b5ead;--heading-size: 2.2rem;--heading-weight: 400;--heading-weight-bold: 700;--heading-line: 1.1;--heading-level1-size: 1.8em;--heading-level1-margins: 1.5em 0 .7em;--heading-level2-size: 1.5em;--heading-level2-margins: 1.5em 0 .7em;--heading-level3-size: 1.2em;--heading-level3-margins: 2em 0 1em;--heading-level4-size: 1em;--heading-level4-margins: 2em 0 1em;--heading-level5-size: 1em;--heading-level5-margins: 2em 0 1em;--heading-level6-size: 1em;--heading-level6-margins: 2em 0 1em;--meta-size: 1rem;--meta-color: #999;--line-heavy: #ccc;--line-light: #ddd;--link-background: #ff980073;--box-shadow: 6px 5px 3px 0 rgba(45, 45, 45, .4);--pre-color: #ccc;--pre-background: #2d2d2d;--code-color: #000;--code-background: #cacaca}::selection{background-color:var(--text-color);color:var(--content-background)}html,body{min-height:100vh;margin:0}body{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line)}h1,h2,h3,h4,h5,h6{font-family:var(--heading-family);font-weight:var(--heading-weight);line-height:var(--heading-line)}a{text-decoration:none}*,*:before,*:after{box-sizing:border-box}.tabs[data-astro-cid-xlvzfuxv]{font-size:var(--text-size);display:flex;list-style:none;margin:0;padding:0}.tabs__tab[data-astro-cid-xlvzfuxv]{display:inline-block;background:var(--content-background);margin:0 0 0 5px;border-top-right-radius:5px;border-top-left-radius:5px}.tabs__tab[data-astro-cid-xlvzfuxv]:first-of-type{margin:0}.tabs__link[data-astro-cid-xlvzfuxv]{display:block;width:18px;height:18px;color:var(--meta-color);transition:color .3s ease;padding:.3em .8em;box-sizing:content-box;box-shadow:0 -1px 3px #2d2d2d66 inset}.tabs__link[data-astro-cid-xlvzfuxv]:hover{color:var(--text-color)}.tabs__link--active[data-astro-cid-xlvzfuxv]{color:var(--heading-color);box-shadow:none}.layout[data-astro-cid-sckkx6r4]{font-size:var(--text-size);display:flex;justify-content:center;flex-direction:column;width:100%;min-height:100vh;margin:0 auto;background-image:url(/images/blueprint.jpg);background-color:var(--main-background);background-size:cover;background-attachment:fixed;background-repeat:no-repeat;background-position:center top}.layout__content[data-astro-cid-sckkx6r4]{flex:1;width:100%;max-width:70rem;padding:0 5em 8em;margin:0 auto}.layout__content-inner[data-astro-cid-sckkx6r4]{background:var(--content-background);box-shadow:var(--box-shadow);border-radius:4px;overflow-x:auto}.layout__header[data-astro-cid-sckkx6r4]{display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:wrap;padding:2em 6em 0;margin:0 auto;width:100%;max-width:70rem}.layout__header-title[data-astro-cid-sckkx6r4]{color:#fff;font-family:Permanent Marker,cursive;font-size:3em;font-weight:var(--heading-weight);margin:0 0 .5em;letter-spacing:1px;text-shadow:0 1px 0 #ccc,1px 2px 0 #bbb,2px 3px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2)}.layout__header-title[data-astro-cid-sckkx6r4] a[data-astro-cid-sckkx6r4],.layout__header-title[data-astro-cid-sckkx6r4] a[data-astro-cid-sckkx6r4]:visited{color:inherit}@media only screen and (max-width:1023px){.layout[data-astro-cid-sckkx6r4]{background-size:initial;background-attachment:initial;background-repeat:repeat}.layout__content[data-astro-cid-sckkx6r4]{padding:0 1em 8em}.layout__header[data-astro-cid-sckkx6r4]{padding:1em 2em 0}.layout__header-title[data-astro-cid-sckkx6r4]{font-size:2em}}
.share[data-astro-cid-ung7bpju]{font-size:var(--meta-size);display:flex;gap:.75em;margin-bottom:1em}.share__button[data-astro-cid-ung7bpju]{opacity:.5;transition:opacity .4s ease-out;color:var(--heading-color);font-size:.85em}.share__button[data-astro-cid-ung7bpju]:hover{opacity:1;text-decoration:underline}.post-details[data-astro-cid-bangc7to]{font-size:var(--text-size);padding:2em 2em 4em}.disqus[data-astro-cid-r2x3s5wt]{font-size:var(--text-size);padding:2em}
.icon[data-astro-cid-patnjmll]{fill:currentColor;width:100%;height:100%;display:block}
.text-block{font-size:var(--text-size);width:100%;overflow:inherit}.text-block h1,.text-block h2,.text-block h3,.text-block h4,.text-block h5,.text-block h6{font-family:var(--heading-family);color:var(--heading-color);font-weight:var(--heading-weight);line-height:var(--heading-line)}.text-block h1{font-size:var(--heading-level1-size);margin:var(--heading-level1-margins)}.text-block h2{font-size:var(--heading-level2-size);margin:var(--heading-level2-margins);padding-bottom:.3em;border-bottom:1px solid var(--line-light)}.text-block h3{font-size:var(--heading-level3-size);margin:var(--heading-level3-margins);text-transform:uppercase}.text-block h4{font-size:var(--heading-level4-size);margin:var(--heading-level4-margins);font-weight:var(--heading-weight-bold)}.text-block h5{font-size:var(--heading-level5-size);margin:var(--heading-level5-margins)}.text-block h6{font-size:var(--heading-level6-size);margin:var(--heading-level6-margins)}.text-block p{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);word-wrap:break-word;margin:0 0 1em;text-align:justify;hyphens:auto}.text-block a{color:inherit;background-image:linear-gradient(to bottom,transparent 37%,var(--link-background) 37%);background-size:100% 300%;background-position:0 10%;transition-property:background-position;transition-duration:.4s;outline:none}.text-block a:hover{background-position:0 100%}.text-block blockquote{border-left:10px solid var(--code-background);margin:30px 0;padding:0 0 0 25px}.text-block pre{background:var(--pre-background);color:var(--pre-color);padding:1.3em 2em;margin:.5em -2em 1.2em;line-height:1;overflow-x:auto}.text-block code{background:var(--code-background);padding:.1em .3em .2em;color:var(--code-color);border-radius:2px;font-size:.9em}.text-block pre code{background:unset;color:inherit;padding:0;font-size:.8em;white-space:pre}.text-block ul,.text-block ol{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);margin:.5em 0 1.2em 1em;padding:0 0 0 1em}.text-block ul{list-style:initial}.text-block ol{list-style:decimal}.text-block ul ul,.text-block ol ol{margin-bottom:.5em}.text-block li{margin:0}.text-block ul ul li{list-style:circle}.text-block ul ul ul li{list-style:square}.text-block hr{margin:3rem 0;height:1px;border:none;border-bottom:1px solid var(--line-heavy)}.text-block table{display:block;width:100%;overflow:auto}.text-block table tr{background-color:#fff;border-top:1px solid var(--line-heavy)}.text-block table tr:nth-child(2n){background-color:#f8f8f8}.text-block table th{font-weight:600}.text-block table th,.text-block table td{padding:.5em 1em;border:1px solid var(--line-light)}.text-block table td{font-weight:var(--text-weight)}.text-block img{max-width:100%}.text-block figure{margin:1.5em 0;text-align:center}.text-block figcaption{font-size:var(--meta-size);color:var(--meta-color);font-style:italic;text-align:center}.text-block iframe{margin:2em auto;display:block}.text-block>:first-child{margin-top:0}.text-block>:last-child{margin-bottom:0}
.post-header[data-astro-cid-yl355ysp]{font-size:var(--text-size)}.post-header__title[data-astro-cid-yl355ysp]{color:var(--heading-color);font-size:var(--heading-level1-size);margin:0 0 .3em}.post-header--listing[data-astro-cid-yl355ysp] .post-header__title[data-astro-cid-yl355ysp]{font-size:var(--heading-level2-size)}.post-header--listing[data-astro-cid-yl355ysp]:hover .post-header__title[data-astro-cid-yl355ysp]{text-decoration:underline}.post-header__icon[data-astro-cid-yl355ysp]{flex-shrink:0;display:inline-block;height:.8em;width:.8em;margin:0 4px 0 0;transform:translateY(3px)}.post-header--details[data-astro-cid-yl355ysp] .post-header__icon[data-astro-cid-yl355ysp]{height:1em;width:1em;margin:0 5px 0 0}.post-header__meta[data-astro-cid-yl355ysp]{color:var(--meta-color);font-size:var(--meta-size);margin:0 0 1em}.post-header__category[data-astro-cid-yl355ysp]{margin:0 0 .5em}.post-header__category-link[data-astro-cid-yl355ysp]{color:var(--heading-color)}.post-header__category-link[data-astro-cid-yl355ysp]:hover{color:var(--text-color);text-decoration:underline}.post-header__excerpt[data-astro-cid-yl355ysp]{color:var(--text-color)}
</style><style>.codepen[data-astro-cid-gzkyidnt]{width:100%}
</style><style>.animation[data-astro-cid-hzra33yf]{margin-bottom:20px}
</style><style>.sankey-chart[data-astro-cid-zf374n66]{margin:2em 0;width:100%}.sankey-container[data-astro-cid-zf374n66]{width:100%;overflow-x:auto}.sankey-container[data-astro-cid-zf374n66] svg[data-astro-cid-zf374n66]{display:block;margin:0 auto;max-width:100%;height:auto}.sankey-caption[data-astro-cid-zf374n66]{text-align:center;color:var(--meta-color, #888);font-size:.85em;margin-top:.5em}
</style></head> <body data-astro-cid-sckkx6r4> <main class="layout" data-astro-cid-sckkx6r4> <header class="layout__header" data-astro-cid-sckkx6r4> <h1 class="layout__header-title" data-astro-cid-sckkx6r4> <a href="/" data-astro-cid-sckkx6r4>Random Thoughts</a> </h1> <ul class="tabs" data-astro-cid-xlvzfuxv> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/" title="Latest posts" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/search" title="Search for content" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zm0-8.9c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.19 12.19l-8.19 3.81 3.81-8.19 8.19-3.81-3.81 8.19z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/archive" title="Content archive" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/about-me" title="About me" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M21,13A9,9 0 0,1 12,22A9,9 0 0,1 3,13L3.03,4.43C5.68,2.88 8.76,2 12.05,2C15.3,2 18.36,2.87 21,4.38V13M13,19.93C16.39,19.44 19,16.5 19,13V5.59C16.9,4.57 14.54,4 12.05,4C9.5,4 7.08,4.6 4.94,5.66L5,13C5,16.5 7.63,19.44 11,19.93V18H13V19.93M11,16H8L6,13L9,14H10L11,13H13L14,14H15L18,13L16,16H13L12,15L11,16M6,9.03C6.64,8.4 7.5,8.05 8.5,8.05C9.45,8.05 10.34,8.4 11,9.03C10.34,9.65 9.45,10 8.5,10C7.5,10 6.64,9.65 6,9.03M13,9.03C13.64,8.4 14.5,8.05 15.5,8.05C16.45,8.05 17.34,8.4 18,9.03C17.34,9.65 16.45,10 15.5,10C14.5,10 13.64,9.65 13,9.03Z" data-astro-cid-patnjmll></path></svg> </a> </li> </ul>  </header> <article class="layout__content" data-astro-cid-sckkx6r4> <div class="layout__content-inner" data-astro-cid-sckkx6r4>  <div class="post-details" data-astro-cid-bangc7to> <div class="post-header post-header--details" data-astro-cid-yl355ysp><p class="post-header__category" data-astro-cid-yl355ysp><a href="/category/frontend" class="post-header__category-link" data-astro-cid-yl355ysp><span class="post-header__icon" data-astro-cid-yl355ysp><svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M18,15H16V17H18M18,11H16V13H18M20,19H12V17H14V15H12V13H14V11H12V9H20M10,7H8V5H10M10,11H8V9H10M10,15H8V13H10M10,19H8V17H10M6,7H4V5H6M6,11H4V9H6M6,15H4V13H6M6,19H4V17H6M12,7V3H2V21H22V7H12Z" data-astro-cid-patnjmll></path></svg></span>Frontend architecture</a></p><h1 class="post-header__title" data-astro-cid-yl355ysp>Drawing a user flow graph with D3.js Sankey and React</h1><p class="post-header__meta" data-astro-cid-yl355ysp>Friday, February 20, 2026</p></div> <div class="share" data-astro-cid-ung7bpju><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbernardodiasdacruz.com%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Facebook" data-astro-cid-ung7bpju>Facebook</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbernardodiasdacruz.com%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&title=Drawing%20a%20user%20flow%20graph%20with%20D3.js%20Sankey%20and%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on LinkedIn" data-astro-cid-ung7bpju>LinkedIn</a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&text=Drawing%20a%20user%20flow%20graph%20with%20D3.js%20Sankey%20and%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Twitter" data-astro-cid-ung7bpju>Twitter</a><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2026%2F02%2F21%2Fdrawing-a-user-flow-graph-with-d3-js-sankey-and-react%2F&title=Drawing%20a%20user%20flow%20graph%20with%20D3.js%20Sankey%20and%20React" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Reddit" data-astro-cid-ung7bpju>Reddit</a></div> <div class="text-block">   <figure><img alt="Drawing a user flow graph with D3.js Sankey and React" src="/content/posts/2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react/ChatGPT-Image-Feb-20-2026-05_33_50-PM.png"/></figure>
<blockquote>
<p>This post has been sitting as a draft since early 2019. It started as a side project — an experiment around using Sankey diagrams to document software behavior. I built a rough proof of concept with D3.js, wrote half a blog post about it, and then life happened. The idea never left my mind, but I never got around to finishing it either. Fast forward to now, AI helped me wrap this up — building the component, fleshing out the examples, finishing the writing. It’s still very experimental and full of rough edges, but it feels good to finally ship something that’s been collecting dust for almost seven years.</p>
</blockquote>
<p>Have you ever tried to document how users navigate through a feature in your application? Flowcharts and decision trees work fine for simple cases, but once you start mapping all the possible paths — with confirmations, edge cases, and outcomes branching out — things get messy fast.</p>
<p>I’ve been experimenting with Sankey diagrams as an alternative way to represent user flows, and the results are pretty interesting. Here’s an example — a CI/CD pipeline where a single code push fans out through parallel checks, converges at build, branches again through staging tests, and flows through review into production:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;commit&#34;,&#34;name&#34;:&#34;Code Push&#34;},{&#34;id&#34;:&#34;lint&#34;,&#34;name&#34;:&#34;Lint&#34;},{&#34;id&#34;:&#34;unit&#34;,&#34;name&#34;:&#34;Unit Tests&#34;},{&#34;id&#34;:&#34;types&#34;,&#34;name&#34;:&#34;Type Check&#34;},{&#34;id&#34;:&#34;security&#34;,&#34;name&#34;:&#34;Security Scan&#34;},{&#34;id&#34;:&#34;build&#34;,&#34;name&#34;:&#34;Build&#34;},{&#34;id&#34;:&#34;preview&#34;,&#34;name&#34;:&#34;Preview Deploy&#34;},{&#34;id&#34;:&#34;staging&#34;,&#34;name&#34;:&#34;Staging Deploy&#34;},{&#34;id&#34;:&#34;e2e&#34;,&#34;name&#34;:&#34;E2E Tests&#34;},{&#34;id&#34;:&#34;smoke&#34;,&#34;name&#34;:&#34;Smoke Tests&#34;},{&#34;id&#34;:&#34;perf&#34;,&#34;name&#34;:&#34;Load Tests&#34;},{&#34;id&#34;:&#34;review&#34;,&#34;name&#34;:&#34;Code Review&#34;},{&#34;id&#34;:&#34;approved&#34;,&#34;name&#34;:&#34;Approved&#34;},{&#34;id&#34;:&#34;rejected&#34;,&#34;name&#34;:&#34;Changes Needed&#34;},{&#34;id&#34;:&#34;production&#34;,&#34;name&#34;:&#34;Production Deploy&#34;},{&#34;id&#34;:&#34;canary&#34;,&#34;name&#34;:&#34;Canary (10%)&#34;},{&#34;id&#34;:&#34;full&#34;,&#34;name&#34;:&#34;Full Rollout&#34;},{&#34;id&#34;:&#34;monitor&#34;,&#34;name&#34;:&#34;Monitoring&#34;}]" data-links="[{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;lint&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;unit&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;types&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;commit&#34;,&#34;target&#34;:&#34;security&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;lint&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;unit&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;types&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;security&#34;,&#34;target&#34;:&#34;build&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;build&#34;,&#34;target&#34;:&#34;preview&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;build&#34;,&#34;target&#34;:&#34;staging&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;e2e&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;smoke&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;staging&#34;,&#34;target&#34;:&#34;perf&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;e2e&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;smoke&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;perf&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;preview&#34;,&#34;target&#34;:&#34;review&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;review&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;review&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;production&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;production&#34;,&#34;target&#34;:&#34;canary&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;production&#34;,&#34;target&#34;:&#34;full&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;canary&#34;,&#34;target&#34;:&#34;monitor&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;full&#34;,&#34;target&#34;:&#34;monitor&#34;,&#34;value&#34;:4}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  <script type="module" src="/_astro/SankeyChart.astro_astro_type_script_index_0_lang.DcFzhntW.js"></script>
<h2 id="why-sankey-diagrams">Why Sankey diagrams?</h2>
<p>Sankey diagrams are traditionally used to visualize flows of energy, materials, or money — where the width of each link represents the magnitude of the flow. But if you think about it, user flows through software are structurally similar: there’s an entry point, a series of possible actions, and multiple outcomes. Variations in behavior naturally create branches downstream.</p>
<p>What makes Sankey particularly useful for documenting software behavior is that you can see all possible paths at once, from initialization to final outcome. Unlike a flowchart where you follow one path at a time, a Sankey diagram gives you the full picture: where flows converge, where they diverge, and how different actions lead to different results.</p>
<p>User experience is fundamentally about a human being moving through time and space. A person sits in front of a screen, and from that moment forward, every tap, click, or scroll is a step in a journey that only moves in one direction. They can press the back button, sure. They can return to the home screen. But they are not the same person they were before — they’ve already seen things, made choices, formed expectations. The state of the interface may look identical, but the moment in time is different. The experience never rewinds.</p>
<p>This is something we tend to overlook when we model software behavior. We draw diagrams with arrows going back and forth, as if the user is bouncing between states in a timeless space. But the truth is closer to a river: it can branch, it can widen, it can split around obstacles, but the water never flows upstream. Sankey diagrams are traditionally used for bi-directional flows — energy cycling through a system, money circulating between accounts. But for user experience, the flow is uni-directional. Time only goes forward, and so does every user’s journey through a system. That’s the key insight behind using Sankey this way: each path through the diagram represents a possible experience unfolding through time, from left to right, from beginning to end.</p>
<h2 id="the-concept">The concept</h2>
<p>Take an e-commerce checkout as an example. From the store’s landing page, users can discover products through search or browsing. After viewing a product and adding it to cart, they choose how to authenticate — guest checkout, sign in, or register. Then they pick a payment method, and the flow ends with either a confirmed order or a declined payment. A uni-directional Sankey chart maps this nicely across stages:</p>
<ol>
<li><strong>Entry</strong> — The starting point (visiting the store)</li>
<li><strong>Discovery</strong> — How the user finds what they want (search, browse)</li>
<li><strong>Interest</strong> — Engaging with the product</li>
<li><strong>Cart</strong> — Committing to a purchase</li>
<li><strong>Account</strong> — Choosing an authentication path</li>
<li><strong>Payment</strong> — Selecting a payment method</li>
<li><strong>Result</strong> — Success or failure</li>
</ol>
<p>Each stage flows into the next, and the branching pattern reveals how a single entry point fans out into multiple possible end states. You immediately see which paths converge (search and browse both lead to the product page), where they diverge (three authentication options), and how different choices ultimately lead to the same outcomes.</p>
<p>Notice how the diagram reads like time itself. The user who browses and then signs in arrives at the credit card form in a different state of mind than the one who searched and checked out as a guest — even though they’re looking at the same screen. The Sankey captures this: they are on different paths, with different histories, arriving at what only appears to be the same place. The position in the diagram is not just a screen — it’s a moment in someone’s experience.</p>
<h2 id="d3js-and-d3-sankey">D3.js and d3-sankey</h2>
<p>For the implementation, I started experimenting with <a href="https://d3js.org/">D3.js</a> and the <a href="https://github.com/Neilos/bihisankey">biHiSankey plugin by Neilos</a>, which supports hierarchical collapsible nodes and bi-directional links. That was a great proof of concept, but for a clean uni-directional user flow, the standard <a href="https://github.com/d3/d3-sankey">d3-sankey</a> module turned out to be a better fit — simpler API, better maintained, and designed exactly for left-to-right flow layouts. And conceptually, stripping away the bi-directional capability felt right. The user’s experience doesn’t flow backwards. Neither should the diagram.</p>
<p>The data model is straightforward. Nodes represent states or actions, and links connect them:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> data</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">  nodes</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Visit Store&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Search&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Browse&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Product Page&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Add to Cart&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Guest Checkout&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Sign In&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Register&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Credit Card&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;PayPal&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Order Confirmed&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;declined&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;Payment Declined&quot;</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#E06C75">  links</span><span style="color:#ABB2BF">: [</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;visit&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;search&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;browse&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;product&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;cart&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;guest&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">3</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;signin&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;register&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;card&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;declined&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">1</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">    { </span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;paypal&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&quot;confirmed&quot;</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF"> },</span></span>
<span class="line"><span style="color:#ABB2BF">  ],</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span></code></pre>
<p>Each node gets an <code>id</code> and a human-readable <code>name</code>. Links define the flow between nodes, and the <code>value</code> property controls the thickness of each connection — you could use uniform values to focus purely on structure, or proportional values to represent actual traffic volume.</p>
<p>The d3-sankey layout handles positioning automatically, arranging nodes in columns by their depth (distance from the source) and drawing curved paths between them.</p>
<h2 id="interactive-features">Interactive features</h2>
<p>One of the coolest things about rendering this with D3 is the interactivity. Hovering over a node highlights all connected paths — tracing the full flow both upstream and downstream — while fading everything else. This makes it really easy to answer questions like “what happens after the user clicks Sign In?” or “which paths lead to a declined payment?”</p>
<p>In a way, the hover interaction lets you do something the user never can: travel back in time. You pick a moment in the flow and instantly see everything that led to it and everything that follows. The user lived it forward, one step at a time. You get to see the whole story at once.</p>
<p>Here’s the checkout flow example in action:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;visit&#34;,&#34;name&#34;:&#34;Visit Store&#34;},{&#34;id&#34;:&#34;search&#34;,&#34;name&#34;:&#34;Search&#34;},{&#34;id&#34;:&#34;browse&#34;,&#34;name&#34;:&#34;Browse&#34;},{&#34;id&#34;:&#34;product&#34;,&#34;name&#34;:&#34;Product Page&#34;},{&#34;id&#34;:&#34;cart&#34;,&#34;name&#34;:&#34;Add to Cart&#34;},{&#34;id&#34;:&#34;guest&#34;,&#34;name&#34;:&#34;Guest Checkout&#34;},{&#34;id&#34;:&#34;signin&#34;,&#34;name&#34;:&#34;Sign In&#34;},{&#34;id&#34;:&#34;register&#34;,&#34;name&#34;:&#34;Register&#34;},{&#34;id&#34;:&#34;card&#34;,&#34;name&#34;:&#34;Credit Card&#34;},{&#34;id&#34;:&#34;paypal&#34;,&#34;name&#34;:&#34;PayPal&#34;},{&#34;id&#34;:&#34;confirmed&#34;,&#34;name&#34;:&#34;Order Confirmed&#34;},{&#34;id&#34;:&#34;declined&#34;,&#34;name&#34;:&#34;Payment Declined&#34;}]" data-links="[{&#34;source&#34;:&#34;visit&#34;,&#34;target&#34;:&#34;search&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;visit&#34;,&#34;target&#34;:&#34;browse&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;search&#34;,&#34;target&#34;:&#34;product&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;browse&#34;,&#34;target&#34;:&#34;product&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;product&#34;,&#34;target&#34;:&#34;cart&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;guest&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;signin&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;cart&#34;,&#34;target&#34;:&#34;register&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;guest&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;guest&#34;,&#34;target&#34;:&#34;paypal&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;signin&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;signin&#34;,&#34;target&#34;:&#34;paypal&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;register&#34;,&#34;target&#34;:&#34;card&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;card&#34;,&#34;target&#34;:&#34;confirmed&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;card&#34;,&#34;target&#34;:&#34;declined&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;paypal&#34;,&#34;target&#34;:&#34;confirmed&#34;,&#34;value&#34;:2}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  
<h2 id="the-component">The component</h2>
<p>Setting up the Sankey layout with d3-sankey is pretty clean. You configure the layout parameters and let it compute the node positions and link paths:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">sankey</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">sankeyLinkHorizontal</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">sankeyLeft</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> &quot;d3-sankey&quot;</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> sankeyLayout</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> sankey</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeId</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> d</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">id</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeWidth</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodePadding</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">14</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">nodeAlign</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">sankeyLeft</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">extent</span><span style="color:#ABB2BF">([[</span><span style="color:#E5C07B">margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">left</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">top</span><span style="color:#ABB2BF">], [</span><span style="color:#E06C75">width</span><span style="color:#56B6C2"> -</span><span style="color:#E5C07B"> margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">right</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">height</span><span style="color:#56B6C2"> -</span><span style="color:#E5C07B"> margin</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">bottom</span><span style="color:#ABB2BF">]]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> graph</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> sankeyLayout</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">  nodes</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">nodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> ({ ...</span><span style="color:#E06C75">d</span><span style="color:#ABB2BF"> })),</span></span>
<span class="line"><span style="color:#E06C75">  links</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">data</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">d</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> ({ ...</span><span style="color:#E06C75">d</span><span style="color:#ABB2BF"> })),</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>
<p>For the hover interaction, I recursively trace all connected links in both directions from the hovered node:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> getConnected</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">node</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> connectedLinks</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Set</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> connectedNodes</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Set</span><span style="color:#ABB2BF">([</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  function</span><span style="color:#61AFEF"> traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">n</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">    graph</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">forEach</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">l</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#56B6C2"> ===</span><span style="color:#E06C75"> n</span><span style="color:#56B6C2"> &amp;&amp;</span><span style="color:#56B6C2"> !</span><span style="color:#E5C07B">connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">has</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#E5C07B">        connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">        connectedNodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">        traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    });</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  function</span><span style="color:#61AFEF"> traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">n</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">    graph</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">links</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">forEach</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">l</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">target</span><span style="color:#56B6C2"> ===</span><span style="color:#E06C75"> n</span><span style="color:#56B6C2"> &amp;&amp;</span><span style="color:#56B6C2"> !</span><span style="color:#E5C07B">connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">has</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#E5C07B">        connectedLinks</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">l</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">        connectedNodes</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">add</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">        traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">l</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">source</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    });</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  traceForward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#61AFEF">  traceBackward</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">node</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">connectedLinks</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">connectedNodes</span><span style="color:#ABB2BF"> };</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Then it’s just a matter of adjusting opacities on hover to fade the unconnected elements and highlight the connected ones.</p>
<h2 id="where-this-could-go">Where this could go</h2>
<p>The checkout and CI/CD examples above are just starting points. Once you start thinking about software behavior as a flow through time, almost any system can be mapped this way. Here are some directions I find exciting:</p>
<p><strong>Feature specs and complexity analysis.</strong> Before writing a single line of code, map out all the possible user paths through a feature. The diagram immediately reveals hidden complexity — edge cases you hadn’t considered, states that are harder to reach, paths that converge in unexpected ways. It’s a design tool as much as a documentation tool.</p>
<p><strong>QA and test coverage.</strong> Overlay test coverage data on the flow. Which paths have automated tests? Which are only covered by manual QA? Which have never been tested at all? The visual makes gaps obvious in a way that a coverage percentage never can.</p>
<p><strong>Analytics and real user data.</strong> Replace the example values with actual traffic numbers. Suddenly you see not just what users can do, but what they actually do — which paths are highways, which are dirt roads, and which are dead ends nobody ever takes. The thickness of each link tells a story about real human behavior.</p>
<p><strong>Incident response pipelines.</strong> From alert firing through triage, investigation, mitigation, and post-mortem. Multiple monitoring sources feed into severity classification, branch through parallel investigation tracks, and converge at resolution. Every incident is a journey through time, and no two follow the same path.</p>
<p><strong>E-commerce order fulfillment.</strong> The full lifecycle from order placement through fraud checks, inventory routing, warehouse picking, carrier selection, and delivery outcomes. A single order branches depending on stock availability, shipping method, and a dozen other variables — each branch representing a different experience for the customer waiting on the other end.</p>
<p><strong>API request lifecycle.</strong> A single HTTP request flowing through your full stack — from client type through CDN, load balancer, authentication, rate limiting, route handling, data sources, and response assembly. Every request is a tiny journey through time, and the Sankey reveals how many different paths exist through what feels like a simple API call.</p>
<p><strong>Content publishing and moderation.</strong> From content creation through automated checks, human review, preparation, multi-channel distribution, and engagement tracking. Different content types take different paths through moderation, converge at scheduling, fan out across distribution channels, and flow into engagement metrics. Here’s what that looks like with 36 nodes:</p>


<div class="sankey-chart" data-astro-cid-zf374n66> <div class="sankey-container" data-nodes="[{&#34;id&#34;:&#34;article&#34;,&#34;name&#34;:&#34;Write Article&#34;},{&#34;id&#34;:&#34;video&#34;,&#34;name&#34;:&#34;Upload Video&#34;},{&#34;id&#34;:&#34;image&#34;,&#34;name&#34;:&#34;Upload Image&#34;},{&#34;id&#34;:&#34;comment&#34;,&#34;name&#34;:&#34;Post Comment&#34;},{&#34;id&#34;:&#34;ai-scan&#34;,&#34;name&#34;:&#34;AI Content Scan&#34;},{&#34;id&#34;:&#34;spam&#34;,&#34;name&#34;:&#34;Spam Filter&#34;},{&#34;id&#34;:&#34;nsfw&#34;,&#34;name&#34;:&#34;NSFW Detection&#34;},{&#34;id&#34;:&#34;plagiarism&#34;,&#34;name&#34;:&#34;Plagiarism Check&#34;},{&#34;id&#34;:&#34;auto-ok&#34;,&#34;name&#34;:&#34;Auto-Approved&#34;},{&#34;id&#34;:&#34;flagged&#34;,&#34;name&#34;:&#34;Flagged for Review&#34;},{&#34;id&#34;:&#34;auto-reject&#34;,&#34;name&#34;:&#34;Auto-Rejected&#34;},{&#34;id&#34;:&#34;editorial&#34;,&#34;name&#34;:&#34;Editorial Review&#34;},{&#34;id&#34;:&#34;legal&#34;,&#34;name&#34;:&#34;Legal Review&#34;},{&#34;id&#34;:&#34;community&#34;,&#34;name&#34;:&#34;Community Mod&#34;},{&#34;id&#34;:&#34;senior&#34;,&#34;name&#34;:&#34;Senior Editor&#34;},{&#34;id&#34;:&#34;approved&#34;,&#34;name&#34;:&#34;Approved&#34;},{&#34;id&#34;:&#34;revision&#34;,&#34;name&#34;:&#34;Revision Requested&#34;},{&#34;id&#34;:&#34;rejected&#34;,&#34;name&#34;:&#34;Rejected&#34;},{&#34;id&#34;:&#34;seo&#34;,&#34;name&#34;:&#34;SEO Optimization&#34;},{&#34;id&#34;:&#34;thumbnail&#34;,&#34;name&#34;:&#34;Thumbnail Generation&#34;},{&#34;id&#34;:&#34;transcode&#34;,&#34;name&#34;:&#34;Transcoding&#34;},{&#34;id&#34;:&#34;schedule&#34;,&#34;name&#34;:&#34;Scheduling&#34;},{&#34;id&#34;:&#34;website&#34;,&#34;name&#34;:&#34;Website&#34;},{&#34;id&#34;:&#34;email&#34;,&#34;name&#34;:&#34;Email Newsletter&#34;},{&#34;id&#34;:&#34;rss&#34;,&#34;name&#34;:&#34;RSS Feed&#34;},{&#34;id&#34;:&#34;social&#34;,&#34;name&#34;:&#34;Social Media&#34;},{&#34;id&#34;:&#34;push&#34;,&#34;name&#34;:&#34;Push Notification&#34;},{&#34;id&#34;:&#34;views&#34;,&#34;name&#34;:&#34;Views &#38; Reads&#34;},{&#34;id&#34;:&#34;likes&#34;,&#34;name&#34;:&#34;Likes &#38; Shares&#34;},{&#34;id&#34;:&#34;comments&#34;,&#34;name&#34;:&#34;Comments&#34;},{&#34;id&#34;:&#34;saves&#34;,&#34;name&#34;:&#34;Saves &#38; Bookmarks&#34;},{&#34;id&#34;:&#34;trending&#34;,&#34;name&#34;:&#34;Trending&#34;},{&#34;id&#34;:&#34;steady&#34;,&#34;name&#34;:&#34;Steady Performance&#34;},{&#34;id&#34;:&#34;low&#34;,&#34;name&#34;:&#34;Low Engagement&#34;},{&#34;id&#34;:&#34;violation&#34;,&#34;name&#34;:&#34;Violation Reported&#34;},{&#34;id&#34;:&#34;archived&#34;,&#34;name&#34;:&#34;Content Archived&#34;}]" data-links="[{&#34;source&#34;:&#34;article&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;article&#34;,&#34;target&#34;:&#34;plagiarism&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;video&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;video&#34;,&#34;target&#34;:&#34;nsfw&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;image&#34;,&#34;target&#34;:&#34;nsfw&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;image&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;comment&#34;,&#34;target&#34;:&#34;spam&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;comment&#34;,&#34;target&#34;:&#34;ai-scan&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;ai-scan&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;spam&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;spam&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;nsfw&#34;,&#34;target&#34;:&#34;auto-reject&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;plagiarism&#34;,&#34;target&#34;:&#34;auto-ok&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;plagiarism&#34;,&#34;target&#34;:&#34;flagged&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;seo&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;thumbnail&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;auto-ok&#34;,&#34;target&#34;:&#34;transcode&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;editorial&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;legal&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;community&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;flagged&#34;,&#34;target&#34;:&#34;senior&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;editorial&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;editorial&#34;,&#34;target&#34;:&#34;revision&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;legal&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;legal&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;community&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;community&#34;,&#34;target&#34;:&#34;rejected&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;senior&#34;,&#34;target&#34;:&#34;approved&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;seo&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;thumbnail&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;approved&#34;,&#34;target&#34;:&#34;transcode&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;seo&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:12},{&#34;source&#34;:&#34;thumbnail&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;transcode&#34;,&#34;target&#34;:&#34;schedule&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;website&#34;,&#34;value&#34;:8},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;email&#34;,&#34;value&#34;:5},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;rss&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;social&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;schedule&#34;,&#34;target&#34;:&#34;push&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;website&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;website&#34;,&#34;target&#34;:&#34;comments&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;email&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;email&#34;,&#34;target&#34;:&#34;likes&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;rss&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;rss&#34;,&#34;target&#34;:&#34;saves&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;social&#34;,&#34;target&#34;:&#34;likes&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;social&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;push&#34;,&#34;target&#34;:&#34;views&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;push&#34;,&#34;target&#34;:&#34;saves&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;trending&#34;,&#34;value&#34;:4},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:6},{&#34;source&#34;:&#34;views&#34;,&#34;target&#34;:&#34;low&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;likes&#34;,&#34;target&#34;:&#34;trending&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;likes&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;comments&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;comments&#34;,&#34;target&#34;:&#34;violation&#34;,&#34;value&#34;:1},{&#34;source&#34;:&#34;saves&#34;,&#34;target&#34;:&#34;steady&#34;,&#34;value&#34;:2},{&#34;source&#34;:&#34;low&#34;,&#34;target&#34;:&#34;archived&#34;,&#34;value&#34;:3},{&#34;source&#34;:&#34;violation&#34;,&#34;target&#34;:&#34;archived&#34;,&#34;value&#34;:1}]" data-astro-cid-zf374n66></div> <p class="sankey-caption" data-astro-cid-zf374n66> <em data-astro-cid-zf374n66>Hover over nodes to trace all connected paths through the flow.</em> </p> </div>  
<p>You can check out the original D3 v3 experiment here: <a href="https://github.com/bernardodiasc/hello-world/tree/master/my-d3-diagrams">Hello World: D3.js</a>. The component embedded in this post uses the more modern d3-sankey module, which I think is the better fit for this use case.</p>   </div>  </div>  <div class="disqus" id="disqus_thread" data-astro-cid-r2x3s5wt></div> <script>(function(){const identifier = "2026-02-21-drawing-a-user-flow-graph-with-d3-js-sankey-and-react";
const title = "Drawing a user flow graph with D3.js Sankey and React";
const url = "https://bernardodiasdacruz.com/2026/02/21/drawing-a-user-flow-graph-with-d3-js-sankey-and-react/";

  if (window.location.hostname !== 'localhost') {
    window.disqus_config = function () {
      this.page.url = url;
      this.page.identifier = identifier;
      this.page.title = title;
    };
    const d = document;
    const s = d.createElement('script');
    s.src = 'https://bernardodiasc.disqus.com/embed.js';
    s.setAttribute('data-timestamp', String(+new Date()));
    (d.head || d.body).appendChild(s);
  }
})();</script>   </div> </article> </main> <script>
      if (window.location.hostname !== 'localhost') {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-10219275-4');
      }
    </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10219275-4"></script> </body> </html> 