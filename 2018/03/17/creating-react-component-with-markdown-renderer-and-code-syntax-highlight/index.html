<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><meta content="#000000" name="theme-color"><link href="/manifest.json" rel="manifest"><link href="/favicon.ico" rel="shortcut icon"><title>Creating React component with Markdown renderer and code syntax highlight - Bernardo Dias da Cruz</title><link href="/styles/main.css" rel="stylesheet"><link href="/static/css/main.f0a36d11.css" rel="stylesheet"><link href="https://www.googletagmanager.com" rel="preconnect"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="/" rel="canonical" data-react-helmet="true"><meta content="Given a Markdown string, then render as HTML with fancy code syntax highlight." data-react-helmet="true" name="description"><meta content="Given a Markdown string, then render as HTML with fancy code syntax highlight." data-react-helmet="true" name="twitter:card"><meta content="@bernardodiasc" data-react-helmet="true" name="twitter:site"><meta content="Creating React component with Markdown renderer and code syntax highlight - Bernardo Dias da Cruz" data-react-helmet="true" name="twitter:title"><meta content="Given a Markdown string, then render as HTML with fancy code syntax highlight." data-react-helmet="true" name="twitter:description"><meta content="@bernardodiasc" data-react-helmet="true" name="twitter:creator"><meta content="/images/thumbnail.png" data-react-helmet="true" name="twitter:image"><meta content="Creating React component with Markdown renderer and code syntax highlight - Bernardo Dias da Cruz" data-react-helmet="true" property="og:title"><meta content="article" data-react-helmet="true" property="og:type"><meta content="http://bernardodiasdacruz.com/" data-react-helmet="true" property="og:url"><meta content="/images/thumbnail.png" data-react-helmet="true" property="og:image"><meta content="Given a Markdown string, then render as HTML with fancy code syntax highlight." data-react-helmet="true" property="og:description"><meta content="Bernardo Dias da Cruz" data-react-helmet="true" property="og:site_name"><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://bernardodiasc.disqus.com" rel="preconnect"><link href="https://c.disquscdn.com/next/embed/styles/lounge.afe8bc0f134a77a505cf2ee26c56a3a9.css" rel="preload" as="style"><link href="https://c.disquscdn.com/next/embed/common.bundle.774abcf1e2c32f6ee53499b090f48ff0.js" rel="preload" as="script"><link href="https://c.disquscdn.com/next/embed/lounge.bundle.8241ae5fc761eb94635acdc63f5fd29f.js" rel="preload" as="script"><link href="https://disqus.com/next/config.js" rel="preload" as="script"><link href="https://c.disquscdn.com" rel="preconnect"><link href="https://disqus.com" rel="preconnect"><script src="https://c.disquscdn.com/next/embed/alfalfa.4a5fcca1fe50a757044dfd331b660625.js" async charset="UTF-8"></script><link href="https://ssl.google-analytics.com" rel="preconnect"><link href="https://connect.facebook.net" rel="preconnect"><link href="https://apis.google.com" rel="preconnect"><link href="http://cdn.viglink.com" rel="preconnect"><link href="http://cdn.viglink.com" rel="preconnect"><link href="https://staticxx.facebook.com" rel="preconnect"><link href="https://accounts.google.com" rel="preconnect"><link href="https://www.facebook.com" rel="preconnect"><link href="https://www.facebook.com" rel="preconnect"><link href="https://links.services.disqus.com" rel="preconnect"><link href="http://links.services.disqus.com" rel="preconnect"><link href="https://ssl.gstatic.com" rel="preconnect"><link href="/static/js/main.f322f1e2.js" rel="preload" as="script"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><main class="Layout"><header class="Layout__header"><h1 class="Layout__header-title"><a aria-current="false" class="AppLink" href="/">Random Thoughts</a></h1><ul class="Layout-Tabs"><li class="Layout-Tabs__tab"><a aria-current="false" class="AppLink Layout-Tabs__link" href="/" title="Latest posts"><svg class="Icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z"></path></svg></a></li><li class="Layout-Tabs__tab"><a aria-current="false" class="AppLink Layout-Tabs__link" href="/search" title="Search for content"><svg class="Icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zm0-8.9c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.19 12.19l-8.19 3.81 3.81-8.19 8.19-3.81-3.81 8.19z"></path></svg></a></li><li class="Layout-Tabs__tab"><a aria-current="false" class="AppLink Layout-Tabs__link" href="/archive" title="Content archive"><svg class="Icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"></path></svg></a></li><li class="Layout-Tabs__tab"><a aria-current="false" class="AppLink Layout-Tabs__link" href="/about-me" title="About me"><svg class="Icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M21,13A9,9 0 0,1 12,22A9,9 0 0,1 3,13L3.03,4.43C5.68,2.88 8.76,2 12.05,2C15.3,2 18.36,2.87 21,4.38V13M13,19.93C16.39,19.44 19,16.5 19,13V5.59C16.9,4.57 14.54,4 12.05,4C9.5,4 7.08,4.6 4.94,5.66L5,13C5,16.5 7.63,19.44 11,19.93V18H13V19.93M11,16H8L6,13L9,14H10L11,13H13L14,14H15L18,13L16,16H13L12,15L11,16M6,9.03C6.64,8.4 7.5,8.05 8.5,8.05C9.45,8.05 10.34,8.4 11,9.03C10.34,9.65 9.45,10 8.5,10C7.5,10 6.64,9.65 6,9.03M13,9.03C13.64,8.4 14.5,8.05 15.5,8.05C16.45,8.05 17.34,8.4 18,9.03C17.34,9.65 16.45,10 15.5,10C14.5,10 13.64,9.65 13,9.03Z"></path></svg></a></li></ul></header><article class="Layout__content"><div class="Layout__content-inner"><div class="PostDetails"><div class="PostHeader PostHeader--details"><p class="PostHeader__category"><a aria-current="false" class="AppLink PostHeader__category-link" href="/category/this-blog"><span class="PostHeader__icon"><svg class="Icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M22,9V7H20V5A2,2 0 0,0 18,3H4A2,2 0 0,0 2,5V19A2,2 0 0,0 4,21H18A2,2 0 0,0 20,19V17H22V15H20V13H22V11H20V9H22M18,19H4V5H18V19M6,13H11V17H6V13M12,7H16V10H12V7M6,7H11V12H6V7M12,11H16V17H12V11Z"></path></svg></span>This blog development process</a></p><h1 class="PostHeader__title">Creating React component with Markdown renderer and code syntax highlight</h1><p class="PostHeader__meta">Saturday March 17th, 2018</p></div><div class="TextBlock"><p>Markdown is pretty nice. As maybe you already know, this blog is based on static markdown files. FrontMatter files to be more precise. Check out the <a href="https://github.com/bernardodiasc/bernardodiasc.github.io/blob/develop/public/content/posts/2018-03-17-creating-react-component-with-markdown-and-code-syntax-highlight-renderer/index.md">source file</a> of this post. Now let me tell you how I do the render the content of the markdown files.</p><p>There are actually many ways to deal with this situation. One for instance, as in this site's <a href="http://bernardodiasdacruz.com/docs/">storybook docs</a>, it uses Webpack loader to import Markdown files directly to JavaScript. Simple as <code>import Content from 'content.md'</code> and then the imported data can be rendered using something like the <a href="https://zhenyong.github.io/react/tips/dangerously-set-inner-html.html">dangerouslySetInnerHTML</a>.</p><p>But more specifically for the content of this site, the data generator is returning the markdown content into a static JSON file. Not yet parsing it to HTML. In order to use that markdown string to render in the page, first, it needs to be parsed to HTML and then rendered as JSX.</p><p>I've used some third-party libraries to help me with the heavy lifting:</p><ul><li><a href="https://github.com/markedjs/marked/">https://github.com/markedjs/marked/</a></li><li><a href="https://github.com/isagalaev/highlight.js/">https://github.com/isagalaev/highlight.js/</a></li><li><a href="https://github.com/utatti/react-render-html/">https://github.com/utatti/react-render-html/</a></li></ul><p>There's not much secret, all those libraries have good documentation. Go for it and install the packages:</p><pre><code class="lang-shell"><span class="hljs-symbol">yarn</span> <span class="hljs-keyword">add </span><span class="hljs-keyword">marked </span>react-render-html highlight.js
</code></pre><p>Then create a component to wrap this rendering logic, so this way you can simply reuse the same logic everywhere.</p><h2 id="the-markdownrenderer-component">The MarkdownRenderer component</h2><p>This is how my React component looks like:</p><pre><code class="lang-javascript"><span class="hljs-comment">// MarkdownRenderer.js</span>
<span class="hljs-keyword">import</span> { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> marked <span class="hljs-keyword">from</span> <span class="hljs-string">'marked'</span>
<span class="hljs-keyword">import</span> renderHTML <span class="hljs-keyword">from</span> <span class="hljs-string">'react-render-html'</span>
<span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">'highlight.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'<a class="vglnk" href="http://highlight.js/styles/tomorrow-night-eighties.css" rel="nofollow"><span>highlight</span><span>.</span><span>js</span><span>/</span><span>styles</span><span>/</span><span>tomorrow</span><span>-</span><span>night</span><span>-</span><span>eighties</span><span>.</span><span>css</span></a>'</span>

marked.setOptions({
  <span class="hljs-attr">highlight</span>: <span class="hljs-function">(<span class="hljs-params">code</span>) =></span> hljs.highlightAuto(code).value
})

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MarkdownRenderer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{
  <span class="hljs-keyword">static</span> defaultProps = {
    <span class="hljs-attr">text</span>: <span class="hljs-string">''</span>,
  }

  render() {
    <span class="hljs-keyword">const</span> { text } = <span class="hljs-keyword">this</span>.props
    <span class="hljs-keyword">return</span> text ? renderHTML(marked(text)) : <span class="hljs-literal">null</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> MarkdownRenderer
</code></pre><p>See it in the <a href="https://github.com/bernardodiasc/bernardodiasc.github.io/blob/develop/src/displays/MarkdownRenderer/MarkdownRenderer.js">source code</a>.</p><h2 id="extra-goodies">Extra goodies</h2><p>The <code>highlight.js</code> will try to identify the code language automatically and create styles as better as possible. Even so using it with <code>marked</code> also allows to define the language on code blocks, as in:</p><pre><code class="lang-markdown"><span class="hljs-comment">// markdown-file.md</span>
```javascript
function() {
  console.log(<span class="hljs-string">'this is actually a "markdown" code block haha'</span>)
}
```
</code></pre></div></div><div class="Disqus"><div id="disqus_thread"><iframe id="dsq-app9814" name="dsq-app9814" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="https://disqus.com/embed/comments/?base=default&f=bernardodiasc&t_i=2018-03-17-creating-react-component-with-markdown-renderer-and-code-syntax-highlight&t_u=http%3A%2F%2Flocalhost%3A45678%2F2018%2F03%2F17%2Fcreating-react-component-with-markdown-renderer-and-code-syntax-highlight&t_e=Creating%20React%20component%20with%20Markdown%20renderer%20and%20code%20syntax%20highlight&t_d=Creating%20React%20component%20with%20Markdown%20renderer%20and%20code%20syntax%20highlight&t_t=Creating%20React%20component%20with%20Markdown%20renderer%20and%20code%20syntax%20highlight&s_o=default#version=3e91f895da97667a42583677a655c093" style="width:1px!important;min-width:100%!important;border:none!important;overflow:hidden!important;height:467px!important" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width:372px!important;border:none!important;overflow:hidden!important;top:0!important;min-width:372px!important;max-width:372px!important;position:fixed!important;z-index:2147483646!important;height:18px!important;min-height:18px!important;max-height:18px!important;display:none!important"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width:372px!important;border:none!important;overflow:hidden!important;bottom:0!important;min-width:372px!important;max-width:372px!important;position:fixed!important;z-index:2147483646!important;height:18px!important;min-height:18px!important;max-height:18px!important;display:none!important"></iframe></div></div></div></article></main></div><script src="https://www.googletagmanager.com/gtag/js?id=UA-10219275-4" async></script><script>if("localhost"!==window.location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-10219275-4")}</script><script src="/static/js/main.f322f1e2.js" type="text/javascript"></script><script src="https://bernardodiasc.disqus.com/embed.js" async id="dsq-embed-scr"></script><iframe style="display:none"></iframe></body></html>