<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Astro v5.17.3"><title>Render web animations with React Lottie - Bernardo Dias da Cruz</title><meta name="description" content="How to render animations from Adobe After Effects using Bodymovin/Lottie and React web."><link rel="canonical" href="https://bernardodiasdacruz.com/2018/04/17/render-web-animations-with-react-lottie/"><meta name="twitter:site" content="@bernardodiasc"><meta name="twitter:title" content="Render web animations with React Lottie"><meta name="twitter:description" content="How to render animations from Adobe After Effects using Bodymovin/Lottie and React web."><meta name="twitter:creator" content="@bernardodiasc"><meta name="twitter:image" content="https://bernardodiasdacruz.com/images/thumbnail.png"><meta property="og:title" content="Render web animations with React Lottie"><meta property="og:type" content="article"><meta property="og:url" content="https://bernardodiasdacruz.com/2018/04/17/render-web-animations-with-react-lottie/"><meta property="og:image" content="https://bernardodiasdacruz.com/images/thumbnail.png"><meta property="og:description" content="How to render animations from Adobe After Effects using Bodymovin/Lottie and React web."><meta property="og:site_name" content="Bernardo Dias da Cruz"><link rel="shortcut icon" href="/favicon.ico"><meta name="google-site-verification" content="w8owtTJwheQ0pp3DJ-bwIKX67nyi2bdCZs8fLs-r-Wc"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=IBM+Plex+Serif:wght@400&family=Permanent+Marker&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/_title_.CGcNIkLq.css">
<style>.share[data-astro-cid-ung7bpju]{font-size:var(--meta-size);display:flex;gap:.75em;margin-bottom:1em}.share__button[data-astro-cid-ung7bpju]{opacity:.5;transition:opacity .4s ease-out;color:var(--heading-color);font-size:.85em}.share__button[data-astro-cid-ung7bpju]:hover{opacity:1;text-decoration:underline}.post-details[data-astro-cid-bangc7to]{font-size:var(--text-size);padding:2em 2em 4em}.disqus[data-astro-cid-r2x3s5wt]{font-size:var(--text-size);padding:2em}
.icon[data-astro-cid-patnjmll]{fill:currentColor;width:100%;height:100%;display:block}
.text-block{font-size:var(--text-size);width:100%;overflow:inherit}.text-block h1,.text-block h2,.text-block h3,.text-block h4,.text-block h5,.text-block h6{font-family:var(--heading-family);color:var(--heading-color);font-weight:var(--heading-weight);line-height:var(--heading-line)}.text-block h1{font-size:var(--heading-level1-size);margin:var(--heading-level1-margins)}.text-block h2{font-size:var(--heading-level2-size);margin:var(--heading-level2-margins);padding-bottom:.3em;border-bottom:1px solid var(--line-light)}.text-block h3{font-size:var(--heading-level3-size);margin:var(--heading-level3-margins);text-transform:uppercase}.text-block h4{font-size:var(--heading-level4-size);margin:var(--heading-level4-margins);font-weight:var(--heading-weight-bold)}.text-block h5{font-size:var(--heading-level5-size);margin:var(--heading-level5-margins)}.text-block h6{font-size:var(--heading-level6-size);margin:var(--heading-level6-margins)}.text-block p{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);word-wrap:break-word;margin:0 0 1em;text-align:justify;hyphens:auto}.text-block a{color:inherit;background-image:linear-gradient(to bottom,transparent 37%,var(--link-background) 37%);background-size:100% 300%;background-position:0 10%;transition-property:background-position;transition-duration:.4s;outline:none}.text-block a:hover{background-position:0 100%}.text-block blockquote{border-left:10px solid var(--code-background);margin:30px 0;padding:0 0 0 25px}.text-block pre{background:var(--pre-background);color:var(--pre-color);padding:1.3em 2em;margin:.5em -2em 1.2em;line-height:1;overflow-x:auto}.text-block code{background:var(--code-background);padding:.1em .3em .2em;color:var(--code-color);border-radius:2px;font-size:.9em}.text-block pre code{background:unset;color:inherit;padding:0;font-size:.8em;white-space:pre}.text-block ul,.text-block ol{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);margin:.5em 0 1.2em 1em;padding:0 0 0 1em}.text-block ul{list-style:initial}.text-block ol{list-style:decimal}.text-block ul ul,.text-block ol ol{margin-bottom:.5em}.text-block li{margin:0}.text-block ul ul li{list-style:circle}.text-block ul ul ul li{list-style:square}.text-block hr{margin:3rem 0;height:1px;border:none;border-bottom:1px solid var(--line-heavy)}.text-block table{display:block;width:100%;overflow:auto}.text-block table tr{background-color:#fff;border-top:1px solid var(--line-heavy)}.text-block table tr:nth-child(2n){background-color:#f8f8f8}.text-block table th{font-weight:600}.text-block table th,.text-block table td{padding:.5em 1em;border:1px solid var(--line-light)}.text-block table td{font-weight:var(--text-weight)}.text-block img{max-width:100%}.text-block figure{margin:1.5em 0;text-align:center}.text-block figcaption{font-size:var(--meta-size);color:var(--meta-color);font-style:italic;text-align:center}.text-block iframe{margin:2em auto;display:block}.text-block>:first-child{margin-top:0}.text-block>:last-child{margin-bottom:0}
.post-header[data-astro-cid-yl355ysp]{font-size:var(--text-size)}.post-header__title[data-astro-cid-yl355ysp]{color:var(--heading-color);font-size:var(--heading-level1-size);margin:0 0 .3em}.post-header--listing[data-astro-cid-yl355ysp] .post-header__title[data-astro-cid-yl355ysp]{font-size:var(--heading-level2-size)}.post-header--listing[data-astro-cid-yl355ysp]:hover .post-header__title[data-astro-cid-yl355ysp]{text-decoration:underline}.post-header__icon[data-astro-cid-yl355ysp]{flex-shrink:0;display:inline-block;height:.8em;width:.8em;margin:0 4px 0 0;transform:translateY(3px)}.post-header--details[data-astro-cid-yl355ysp] .post-header__icon[data-astro-cid-yl355ysp]{height:1em;width:1em;margin:0 5px 0 0}.post-header__meta[data-astro-cid-yl355ysp]{color:var(--meta-color);font-size:var(--meta-size);margin:0 0 1em}.post-header__category[data-astro-cid-yl355ysp]{margin:0 0 .5em}.post-header__category-link[data-astro-cid-yl355ysp]{color:var(--heading-color)}.post-header__category-link[data-astro-cid-yl355ysp]:hover{color:var(--text-color);text-decoration:underline}.post-header__excerpt[data-astro-cid-yl355ysp]{color:var(--text-color)}
</style><style>.codepen[data-astro-cid-gzkyidnt]{width:100%}
</style><style>.animation[data-astro-cid-hzra33yf]{margin-bottom:20px}
</style><style>.sankey-chart[data-astro-cid-zf374n66]{margin:2em 0;width:100%}.sankey-container[data-astro-cid-zf374n66]{width:100%;overflow-x:auto}.sankey-container[data-astro-cid-zf374n66] svg[data-astro-cid-zf374n66]{display:block;margin:0 auto;max-width:100%;height:auto}.sankey-caption[data-astro-cid-zf374n66]{text-align:center;color:var(--meta-color, #888);font-size:.85em;margin-top:.5em}
</style></head> <body data-astro-cid-sckkx6r4> <main class="layout" data-astro-cid-sckkx6r4> <header class="layout__header" data-astro-cid-sckkx6r4> <h1 class="layout__header-title" data-astro-cid-sckkx6r4> <a href="/" data-astro-cid-sckkx6r4>Random Thoughts</a> </h1> <nav class="layout__nav" data-astro-cid-sckkx6r4> <ul class="tabs" data-astro-cid-xlvzfuxv> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/" title="Latest posts" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/search" title="Search for content" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zm0-8.9c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.19 12.19l-8.19 3.81 3.81-8.19 8.19-3.81-3.81 8.19z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/archive" title="Content archive" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/about-me" title="About me" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M21,13A9,9 0 0,1 12,22A9,9 0 0,1 3,13L3.03,4.43C5.68,2.88 8.76,2 12.05,2C15.3,2 18.36,2.87 21,4.38V13M13,19.93C16.39,19.44 19,16.5 19,13V5.59C16.9,4.57 14.54,4 12.05,4C9.5,4 7.08,4.6 4.94,5.66L5,13C5,16.5 7.63,19.44 11,19.93V18H13V19.93M11,16H8L6,13L9,14H10L11,13H13L14,14H15L18,13L16,16H13L12,15L11,16M6,9.03C6.64,8.4 7.5,8.05 8.5,8.05C9.45,8.05 10.34,8.4 11,9.03C10.34,9.65 9.45,10 8.5,10C7.5,10 6.64,9.65 6,9.03M13,9.03C13.64,8.4 14.5,8.05 15.5,8.05C16.45,8.05 17.34,8.4 18,9.03C17.34,9.65 16.45,10 15.5,10C14.5,10 13.64,9.65 13,9.03Z" data-astro-cid-patnjmll></path></svg> </a> </li> </ul>  <a href="/pt/2018/04/17/render-web-animations-with-react-lottie/" class="lang-switch" title="Português" data-astro-cid-64r42zdf> <span class="lang-switch__current" data-astro-cid-64r42zdf>EN</span> <span class="lang-switch__separator" data-astro-cid-64r42zdf>/</span> <span class="lang-switch__other" data-astro-cid-64r42zdf>PT</span> </a>  </nav> </header> <article class="layout__content" data-astro-cid-sckkx6r4> <div class="layout__content-inner" data-astro-cid-sckkx6r4>  <div class="post-details" data-astro-cid-bangc7to> <div class="post-header post-header--details" data-astro-cid-yl355ysp><p class="post-header__category" data-astro-cid-yl355ysp><a href="/category/this-blog" class="post-header__category-link" data-astro-cid-yl355ysp><span class="post-header__icon" data-astro-cid-yl355ysp><svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M22,9V7H20V5A2,2 0 0,0 18,3H4A2,2 0 0,0 2,5V19A2,2 0 0,0 4,21H18A2,2 0 0,0 20,19V17H22V15H20V13H22V11H20V9H22M18,19H4V5H18V19M6,13H11V17H6V13M12,7H16V10H12V7M6,7H11V12H6V7M12,11H16V17H12V11Z" data-astro-cid-patnjmll></path></svg></span>This blog development process</a></p><h1 class="post-header__title" data-astro-cid-yl355ysp>Render web animations with React Lottie</h1><p class="post-header__meta" data-astro-cid-yl355ysp>Monday, April 16, 2018</p></div> <div class="share" data-astro-cid-ung7bpju><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F17%2Frender-web-animations-with-react-lottie%2F" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Facebook" data-astro-cid-ung7bpju>Facebook</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F17%2Frender-web-animations-with-react-lottie%2F&title=Render%20web%20animations%20with%20React%20Lottie" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on LinkedIn" data-astro-cid-ung7bpju>LinkedIn</a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F17%2Frender-web-animations-with-react-lottie%2F&text=Render%20web%20animations%20with%20React%20Lottie" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Twitter" data-astro-cid-ung7bpju>Twitter</a><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F17%2Frender-web-animations-with-react-lottie%2F&title=Render%20web%20animations%20with%20React%20Lottie" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Reddit" data-astro-cid-ung7bpju>Reddit</a></div> <div class="text-block">   <p>So I heard you like animations? Me too! :D</p>
<blockquote>
<p>Maybe you came here from React-Native grounds looking to improve your user experience with beauty animations. Well, in this post I’m going to focus on animations for web, but it’s all based on the same foundations, therefore, the content may help for any of the cases.</p>
</blockquote>
<h2 id="the-user-experience">The user experience</h2>
<p>Just a little bit of context, I always like to share this talk when the subject is about making things more interesting:</p>
<div class="video"><iframe title="Fy0aCDmgnxg" width="560" height="315" src="https://www.youtube.com/embed/Fy0aCDmgnxg?rel=0" frameborder="0" allow="encrypted-media" allowfullscreen></iframe></div>
<p>Let’s go from the take: “adding juice to games or apps or websites”. This is about improving the experience. Make something static to feel more alive and reaching emotions through interactions. We are not on paper anymore, this is the digital experience! Every little detail counts to engage our user.</p>
<h2 id="animations-for-the-web">Animations for the web</h2>
<div class="animation" style="max-width: 100%; height: 300px;" data-astro-cid-hzra33yf><dotlottie-player src="https://assets2.lottiefiles.com/datafiles/k1MFWbGaYSJLXKa/data.json" background="transparent" speed="1" style="width: 100%; height: 100%;" loop="true" autoplay="true" data-astro-cid-hzra33yf="true"></dotlottie-player></div><script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
<p>Remember the Macromedia/Adobe Flash days? I do remember a lot. Oh, nostalgia. I built so many full animated websites and even small pieces of animations or just animated videos for the fun. Nowadays we, web and app developers, don’t use Flash anymore, mostly. Well, not as much as we used before and not for the same purposes. But what replaced that amazing tool?</p>
<p>Yeah, that’s a good question! Firstly, there were valid reasons for the Flash to fall into disuse. Reasons like going against the open web, shame on SWF. But let’s make clear that the capabilities of the Flash software by itself wasn’t one of the reasons. I can ensure you. And now that we don’t use such tooling anymore, what do we use to create animations?</p>
<p>Tell you the truth: I don’t know exactly what’s the new standard! I guess there aren’t any ultimate standard currently. There are just too many ways nowadays. CSS/SVG/JS animations are becoming stronger and it’s capabilities getting better and better over time. Dozens of JS libraries out there that do a great job supporting animations. ¯\_(ツ)_/¯</p>
<h2 id="bodymovin--lottie">Bodymovin &amp; Lottie</h2>
<p>The thing is that the source code of animations aren’t everything. In many cases, we need powerful software with a full-featured interface and stuff. And here shines the <a href="https://www.adobe.com/products/aftereffects.html">Adobe After Effects</a>. This software is around not just nowadays but since a long time already. So many great video effects can be made. But yeah, let’s go back to the web!</p>
<p>There is a plugin for After Effects called <a href="https://github.com/airbnb/lottie-web">Bodymovin</a> that can export animations in JSON format, that can be used on the web and native apps!</p>
<p>Watch this walkthrough on how to export the animation JSON from your After Effects project:</p>
<div class="video"><iframe title="5XMUJdjI0L8" width="560" height="315" src="https://www.youtube.com/embed/5XMUJdjI0L8?rel=0" frameborder="0" allow="encrypted-media" allowfullscreen></iframe></div>
<p>Pretty easy! Now, if you want to render the animation in your web/native project as SVG/Canvas/HTML format, all you need is the <a href="https://github.com/airbnb/lottie-web">AirBnb’s Lottie web</a> library (the docs are good if you are looking for instructions: <a href="http://airbnb.io/lottie/">http://airbnb.io/lottie/</a>).</p>
<p>And if you want to leverage the use case here for a React website, you can use the <a href="https://github.com/chenqingspring/react-lottie">https://github.com/chenqingspring/react-lottie</a> component. It simplifies the adoption really well, check out some demos:</p>
<div class="animation" style="max-width: 100%; height: 340;" data-astro-cid-hzra33yf><dotlottie-player src="https://assets2.lottiefiles.com/datafiles/DUUxR2mK1skeLVf/data.json" background="transparent" speed="1" style="width: 100%; height: 100%;" loop="true" autoplay="true" data-astro-cid-hzra33yf="true"></dotlottie-player></div><script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
<p>Yeah, Lego… Components… got it? Haha. That’s infinite animation with a loop, but Bodymovin supports other events as well. Check the example bellow of the “favorite” star animation clicking on it:</p>
<div class="animation" style="max-width: 200; height: 200;" data-astro-cid-hzra33yf><dotlottie-player src="https://assets2.lottiefiles.com/datafiles/FnDJnGqjYlMbEeY/data.json" background="transparent" speed="1" style="width: 100%; height: 100%;" loop="true" autoplay="true" data-astro-cid-hzra33yf="true"></dotlottie-player></div><script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
<h3 id="my-react-component">My React component</h3>
<p>Alright, if you are curious about how I included Lottie web animation in the content of this blog, then first take a look at this post I wrote: <a href="https://bernardodiasdacruz.com/2018/04/09/markdown-renderer-component-that-can-render-other-react-components">Markdown renderer component that can render other React components</a>.</p>
<p>For my use case I create the <code>&lt;Animation /&gt;</code> component:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf;overflow-x:auto" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#E06C75"> React</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75">PureComponent</span><span style="color:#ABB2BF"> } </span><span style="color:#C678DD">from</span><span style="color:#98C379"> &#39;react&#39;</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#E06C75"> Lottie</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> &#39;react-lottie&#39;</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#E06C75"> animations</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> &#39;./animations&#39;</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#98C379"> &#39;./Animation.css&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> Animation</span><span style="color:#C678DD"> extends</span><span style="color:#E5C07B"> PureComponent</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  static</span><span style="color:#E06C75"> defaultProps</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">    animation</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&#39;&#39;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">    width</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&#39;100%&#39;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">    height</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&#39;100%&#39;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">    loop</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">    autoPlay</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  constructor</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">props</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B;font-style:italic">    super</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">props</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#E5C07B">    this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">state</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">      isStopped</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">autoPlay</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">      isPaused</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">autoPlay</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">      isComplete</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  handleClick</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B">    this</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setState</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">isPaused</span><span style="color:#ABB2BF">: </span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">state</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">isPaused</span><span style="color:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  handleEvent</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">obj</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">loop</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">obj</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">currentTime</span><span style="color:#56B6C2"> ===</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">obj</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">totalTime</span><span style="color:#56B6C2"> -</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD">        if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">state</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">isComplete</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E5C07B">          this</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setState</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">isStopped</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">isComplete</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF">        } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E5C07B">          this</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setState</span><span style="color:#ABB2BF">({ </span><span style="color:#E06C75">isStopped</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">isComplete</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF"> })</span></span>
<span class="line"><span style="color:#ABB2BF">        }</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  render</span><span style="color:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> animation</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> animations</span><span style="color:#ABB2BF">[</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">animation</span><span style="color:#ABB2BF">]</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#E5C07B"> defaultOptions</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">      loop</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">loop</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">      autoplay</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">autoPlay</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">      animationData</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">animation</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">      rendererSettings</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">        preserveAspectRatio</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&#39;xMidYMid slice&#39;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#61AFEF"> makeValidNumber</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">value</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span></span>
<span class="line"><span style="color:#E5C07B">      value</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">substr</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">value</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">length</span><span style="color:#56B6C2"> -</span><span style="color:#D19A66"> 1</span><span style="color:#ABB2BF">) </span><span style="color:#56B6C2">===</span><span style="color:#98C379"> &#39;%&#39;</span><span style="color:#C678DD"> ?</span><span style="color:#E06C75"> value</span><span style="color:#C678DD"> :</span><span style="color:#61AFEF"> Number</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF">      &lt;</span><span style="color:#E06C75">div</span><span style="color:#D19A66;font-style:italic"> className</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;Animation&quot;</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">        &lt;</span><span style="color:#E5C07B">Lottie</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">handleClick</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          options</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">defaultOptions</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          width</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#61AFEF">makeValidNumber</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">width</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          height</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#61AFEF">makeValidNumber</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">height</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          isStopped</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">state</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">isStopped</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          isPaused</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">state</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">isPaused</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">          eventListeners</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span></span>
<span class="line"><span style="color:#ABB2BF">            [</span></span>
<span class="line"><span style="color:#ABB2BF">              {</span></span>
<span class="line"><span style="color:#E06C75">                eventName</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">&#39;enterFrame&#39;</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#61AFEF">                callback</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75;font-style:italic">obj</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> this</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">handleEvent</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">obj</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#ABB2BF">              },</span></span>
<span class="line"><span style="color:#ABB2BF">            ]</span></span>
<span class="line"><span style="color:#C678DD">          }</span></span>
<span class="line"><span style="color:#ABB2BF">        /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">      &lt;/</span><span style="color:#E06C75">div</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">    )</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">export</span><span style="color:#C678DD"> default</span><span style="color:#E06C75"> Animation</span></span></code></pre>
<p>You can always check the source code of this website too: <a href="https://github.com/bernardodiasc/bernardodiasc.github.io/blob/3e4289e5d8aedb72d44cc82a559eec20fae7372c/src/displays/Animation/Animation.js">Animation</a></p>
<h3 id="animation-credits">Animation credits:</h3>
<ul>
<li>Rey updated: <a href="https://www.lottiefiles.com/82-rey-updated">https://www.lottiefiles.com/82-rey-updated</a></li>
<li>Lego loader: <a href="https://www.lottiefiles.com/410-lego-loader">https://www.lottiefiles.com/410-lego-loader</a></li>
<li>Favoutire app icon: <a href="https://www.lottiefiles.com/72-favourite-app-icon">https://www.lottiefiles.com/72-favourite-app-icon</a></li>
</ul>
<p>There are many more cool examples in <a href="https://www.lottiefiles.com/">https://www.lottiefiles.com/</a> website!</p>
<h2 id="moar-about-animations1">Moar about animations!1!!</h2>
<p>Since we saw the goodness of Lottie web, let me tell you about one drawback I had to deal with recently. You know, it’s good to be realistic about technical choices, not everything is flowers.</p>
<p>The case was: In a Meteor project I’ve been working on, I had to include an animation and our team decided to use Lottie web. The problem is that the library relies on <code>window</code> object that’s not available for SSR. Server-side rendering is a default feature on Meteor apps. Until the date of this post, this issue isn’t resolved, although it’s a known problem and I believe will be addressed soon.</p>
<p>As I told before, there are many ways to create interactive animations for the web and for this particular case I decided to go with CSS keyframes, the result went as expected, you can take a look here:</p>
<iframe class="codepen" height="350" scrolling="no" title="Rocket animation" src="//codepen.io/bernardodiasc/embed/QmPybv/?height=350&#38;theme-id=0&#38;default-tab=result&#38;embed-version=2" frameborder="no" allowfullscreen data-astro-cid-gzkyidnt>
    See the Pen <a href={`https://codepen.io/bernardodiasc/pen/${hash}/`}>{title}</a> by Bernardo Dias (<a href="https://codepen.io/bernardodiasc">@bernardodiasc</a>) on <a href="https://codepen.io">CodePen</a>.
  </iframe>
<p>I hope to get back on animation topic much more often on future blog posts. I’ve been using several different approaches and still can’t tell which one is the best. My guess is that there are cases and cases that will rely on different solutions. See ya!</p>   </div>  </div>  <div class="disqus" id="disqus_thread" data-astro-cid-r2x3s5wt></div> <script>(function(){const identifier = "2018-04-17-render-web-animations-with-react-lottie";
const title = "Render web animations with React Lottie";
const url = "https://bernardodiasdacruz.com/2018/04/17/render-web-animations-with-react-lottie/";

  if (window.location.hostname !== 'localhost') {
    window.disqus_config = function () {
      this.page.url = url;
      this.page.identifier = identifier;
      this.page.title = title;
    };
    const d = document;
    const s = d.createElement('script');
    s.src = 'https://bernardodiasc.disqus.com/embed.js';
    s.setAttribute('data-timestamp', String(+new Date()));
    (d.head || d.body).appendChild(s);
  }
})();</script>   </div> </article> </main> <script>
      if (window.location.hostname !== 'localhost') {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-10219275-4');
      }
    </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10219275-4"></script> </body> </html> 