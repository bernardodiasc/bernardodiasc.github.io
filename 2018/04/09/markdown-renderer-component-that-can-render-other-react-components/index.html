<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Astro v5.17.3"><title>Markdown renderer component that can render other React components - Bernardo Dias da Cruz</title><meta name="description" content="Markdown contents just got really really better!"><link rel="canonical" href="https://bernardodiasdacruz.com/2018/04/09/markdown-renderer-component-that-can-render-other-react-components/"><meta name="twitter:site" content="@bernardodiasc"><meta name="twitter:title" content="Markdown renderer component that can render other React components"><meta name="twitter:description" content="Markdown contents just got really really better!"><meta name="twitter:creator" content="@bernardodiasc"><meta name="twitter:image" content="https://bernardodiasdacruz.com/images/thumbnail.png"><meta property="og:title" content="Markdown renderer component that can render other React components"><meta property="og:type" content="article"><meta property="og:url" content="https://bernardodiasdacruz.com/2018/04/09/markdown-renderer-component-that-can-render-other-react-components/"><meta property="og:image" content="https://bernardodiasdacruz.com/images/thumbnail.png"><meta property="og:description" content="Markdown contents just got really really better!"><meta property="og:site_name" content="Bernardo Dias da Cruz"><link rel="shortcut icon" href="/favicon.ico"><meta name="google-site-verification" content="w8owtTJwheQ0pp3DJ-bwIKX67nyi2bdCZs8fLs-r-Wc"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=IBM+Plex+Serif:wght@400&family=Permanent+Marker&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/_title_.CGcNIkLq.css">
<style>.share[data-astro-cid-ung7bpju]{font-size:var(--meta-size);display:flex;gap:.75em;margin-bottom:1em}.share__button[data-astro-cid-ung7bpju]{opacity:.5;transition:opacity .4s ease-out;color:var(--heading-color);font-size:.85em}.share__button[data-astro-cid-ung7bpju]:hover{opacity:1;text-decoration:underline}.post-details[data-astro-cid-bangc7to]{font-size:var(--text-size);padding:2em 2em 4em}.disqus[data-astro-cid-r2x3s5wt]{font-size:var(--text-size);padding:2em}
.icon[data-astro-cid-patnjmll]{fill:currentColor;width:100%;height:100%;display:block}
.text-block{font-size:var(--text-size);width:100%;overflow:inherit}.text-block h1,.text-block h2,.text-block h3,.text-block h4,.text-block h5,.text-block h6{font-family:var(--heading-family);color:var(--heading-color);font-weight:var(--heading-weight);line-height:var(--heading-line)}.text-block h1{font-size:var(--heading-level1-size);margin:var(--heading-level1-margins)}.text-block h2{font-size:var(--heading-level2-size);margin:var(--heading-level2-margins);padding-bottom:.3em;border-bottom:1px solid var(--line-light)}.text-block h3{font-size:var(--heading-level3-size);margin:var(--heading-level3-margins);text-transform:uppercase}.text-block h4{font-size:var(--heading-level4-size);margin:var(--heading-level4-margins);font-weight:var(--heading-weight-bold)}.text-block h5{font-size:var(--heading-level5-size);margin:var(--heading-level5-margins)}.text-block h6{font-size:var(--heading-level6-size);margin:var(--heading-level6-margins)}.text-block p{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);word-wrap:break-word;margin:0 0 1em;text-align:justify;hyphens:auto}.text-block a{color:inherit;background-image:linear-gradient(to bottom,transparent 37%,var(--link-background) 37%);background-size:100% 300%;background-position:0 10%;transition-property:background-position;transition-duration:.4s;outline:none}.text-block a:hover{background-position:0 100%}.text-block blockquote{border-left:10px solid var(--code-background);margin:30px 0;padding:0 0 0 25px}.text-block pre{background:var(--pre-background);color:var(--pre-color);padding:1.3em 2em;margin:.5em -2em 1.2em;line-height:1;overflow-x:auto}.text-block code{background:var(--code-background);padding:.1em .3em .2em;color:var(--code-color);border-radius:2px;font-size:.9em}.text-block pre code{background:unset;color:inherit;padding:0;font-size:.8em;white-space:pre}.text-block ul,.text-block ol{font-family:var(--text-family);color:var(--text-color);font-size:var(--text-size);font-weight:var(--text-weight);line-height:var(--text-line);margin:.5em 0 1.2em 1em;padding:0 0 0 1em}.text-block ul{list-style:initial}.text-block ol{list-style:decimal}.text-block ul ul,.text-block ol ol{margin-bottom:.5em}.text-block li{margin:0}.text-block ul ul li{list-style:circle}.text-block ul ul ul li{list-style:square}.text-block hr{margin:3rem 0;height:1px;border:none;border-bottom:1px solid var(--line-heavy)}.text-block table{display:block;width:100%;overflow:auto}.text-block table tr{background-color:#fff;border-top:1px solid var(--line-heavy)}.text-block table tr:nth-child(2n){background-color:#f8f8f8}.text-block table th{font-weight:600}.text-block table th,.text-block table td{padding:.5em 1em;border:1px solid var(--line-light)}.text-block table td{font-weight:var(--text-weight)}.text-block img{max-width:100%}.text-block figure{margin:1.5em 0;text-align:center}.text-block figcaption{font-size:var(--meta-size);color:var(--meta-color);font-style:italic;text-align:center}.text-block iframe{margin:2em auto;display:block}.text-block>:first-child{margin-top:0}.text-block>:last-child{margin-bottom:0}
.post-header[data-astro-cid-yl355ysp]{font-size:var(--text-size)}.post-header__title[data-astro-cid-yl355ysp]{color:var(--heading-color);font-size:var(--heading-level1-size);margin:0 0 .3em}.post-header--listing[data-astro-cid-yl355ysp] .post-header__title[data-astro-cid-yl355ysp]{font-size:var(--heading-level2-size)}.post-header--listing[data-astro-cid-yl355ysp]:hover .post-header__title[data-astro-cid-yl355ysp]{text-decoration:underline}.post-header__icon[data-astro-cid-yl355ysp]{flex-shrink:0;display:inline-block;height:.8em;width:.8em;margin:0 4px 0 0;transform:translateY(3px)}.post-header--details[data-astro-cid-yl355ysp] .post-header__icon[data-astro-cid-yl355ysp]{height:1em;width:1em;margin:0 5px 0 0}.post-header__meta[data-astro-cid-yl355ysp]{color:var(--meta-color);font-size:var(--meta-size);margin:0 0 1em}.post-header__category[data-astro-cid-yl355ysp]{margin:0 0 .5em}.post-header__category-link[data-astro-cid-yl355ysp]{color:var(--heading-color)}.post-header__category-link[data-astro-cid-yl355ysp]:hover{color:var(--text-color);text-decoration:underline}.post-header__excerpt[data-astro-cid-yl355ysp]{color:var(--text-color)}
</style></head> <body data-astro-cid-sckkx6r4> <main class="layout" data-astro-cid-sckkx6r4> <header class="layout__header" data-astro-cid-sckkx6r4> <h1 class="layout__header-title" data-astro-cid-sckkx6r4> <a href="/" data-astro-cid-sckkx6r4>Random Thoughts</a> </h1> <nav class="layout__nav" data-astro-cid-sckkx6r4> <ul class="tabs" data-astro-cid-xlvzfuxv> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/" title="Latest posts" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/search" title="Search for content" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zm0-8.9c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm2.19 12.19l-8.19 3.81 3.81-8.19 8.19-3.81-3.81 8.19z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/archive" title="Content archive" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z" data-astro-cid-patnjmll></path></svg> </a> </li> <li class="tabs__tab" data-astro-cid-xlvzfuxv> <a href="/about-me" title="About me" class="tabs__link" data-astro-cid-xlvzfuxv> <svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M21,13A9,9 0 0,1 12,22A9,9 0 0,1 3,13L3.03,4.43C5.68,2.88 8.76,2 12.05,2C15.3,2 18.36,2.87 21,4.38V13M13,19.93C16.39,19.44 19,16.5 19,13V5.59C16.9,4.57 14.54,4 12.05,4C9.5,4 7.08,4.6 4.94,5.66L5,13C5,16.5 7.63,19.44 11,19.93V18H13V19.93M11,16H8L6,13L9,14H10L11,13H13L14,14H15L18,13L16,16H13L12,15L11,16M6,9.03C6.64,8.4 7.5,8.05 8.5,8.05C9.45,8.05 10.34,8.4 11,9.03C10.34,9.65 9.45,10 8.5,10C7.5,10 6.64,9.65 6,9.03M13,9.03C13.64,8.4 14.5,8.05 15.5,8.05C16.45,8.05 17.34,8.4 18,9.03C17.34,9.65 16.45,10 15.5,10C14.5,10 13.64,9.65 13,9.03Z" data-astro-cid-patnjmll></path></svg> </a> </li> </ul>  <a href="/pt/2018/04/09/markdown-renderer-component-that-can-render-other-react-components/" class="lang-switch" title="Português" data-astro-cid-64r42zdf> <span class="lang-switch__current" data-astro-cid-64r42zdf>EN</span> <span class="lang-switch__separator" data-astro-cid-64r42zdf>/</span> <span class="lang-switch__other" data-astro-cid-64r42zdf>PT</span> </a>  </nav> </header> <article class="layout__content" data-astro-cid-sckkx6r4> <div class="layout__content-inner" data-astro-cid-sckkx6r4>  <div class="post-details" data-astro-cid-bangc7to> <div class="post-header post-header--details" data-astro-cid-yl355ysp><p class="post-header__category" data-astro-cid-yl355ysp><a href="/category/this-blog" class="post-header__category-link" data-astro-cid-yl355ysp><span class="post-header__icon" data-astro-cid-yl355ysp><svg class="icon" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" data-astro-cid-patnjmll><path d="M22,9V7H20V5A2,2 0 0,0 18,3H4A2,2 0 0,0 2,5V19A2,2 0 0,0 4,21H18A2,2 0 0,0 20,19V17H22V15H20V13H22V11H20V9H22M18,19H4V5H18V19M6,13H11V17H6V13M12,7H16V10H12V7M6,7H11V12H6V7M12,11H16V17H12V11Z" data-astro-cid-patnjmll></path></svg></span>This blog development process</a></p><h1 class="post-header__title" data-astro-cid-yl355ysp>Markdown renderer component that can render other React components</h1><p class="post-header__meta" data-astro-cid-yl355ysp>Sunday, April 8, 2018</p></div> <div class="share" data-astro-cid-ung7bpju><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F09%2Fmarkdown-renderer-component-that-can-render-other-react-components%2F" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Facebook" data-astro-cid-ung7bpju>Facebook</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F09%2Fmarkdown-renderer-component-that-can-render-other-react-components%2F&title=Markdown%20renderer%20component%20that%20can%20render%20other%20React%20components" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on LinkedIn" data-astro-cid-ung7bpju>LinkedIn</a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F09%2Fmarkdown-renderer-component-that-can-render-other-react-components%2F&text=Markdown%20renderer%20component%20that%20can%20render%20other%20React%20components" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Twitter" data-astro-cid-ung7bpju>Twitter</a><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fbernardodiasdacruz.com%2F2018%2F04%2F09%2Fmarkdown-renderer-component-that-can-render-other-react-components%2F&title=Markdown%20renderer%20component%20that%20can%20render%20other%20React%20components" target="_blank" rel="noopener noreferrer" class="share__button" title="Share on Reddit" data-astro-cid-ung7bpju>Reddit</a></div> <div class="text-block">   <p>Alright, previously I wrote about how this site renders content from Markdown files, you can read it here: <a href="https://bernardodiasdacruz.com/2018/03/17/creating-react-component-with-markdown-renderer-and-code-syntax-highlight">Creating React component with Markdown renderer and code syntax highlight</a>. In this post I’ll explain some cool upgrades I made in the <code>MarkdownRenderer</code> component used in this site.</p>
<h2 id="how-it-was-working-so-far">How it was working so far</h2>
<p>Just to give you some context, this site uses markdown static files to store the content. There is no rich-text editor interface to provide fancy features for different kinds of data representation. If I want to include an image in the middle of the post I had to explicitly declare the markup using HTML tags:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">figure</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">  &#x3C;</span><span style="color:#E06C75">img</span><span style="color:#D19A66"> alt</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"The alternative textual representation"</span><span style="color:#D19A66"> src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"full-path/of/the-image.png"</span><span style="color:#ABB2BF"> /></span></span>
<span class="line"><span style="color:#ABB2BF">  &#x3C;</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">>Some helpful caption&#x3C;/</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">figure</span><span style="color:#ABB2BF">></span></span></code></pre>
<p>It’s not difficult, although too repetitive and prone to failures. That’s actually a bit boring to do repeatedly every time. The markdown itself provides a lot of patterns to simplify the data structures, and it’s awesome. But markdown is limited and that’s why for many non-textual contents some more complex data structures are required.</p>
<h2 id="whats-expected">What’s expected</h2>
<p>You know what would be cool? React components inside markdown content!</p>
<p>Using a React component I can simplify the data structure patterns and also include incredible full feature behaviors. Ya know, React! Let’s take some examples:</p>
<h3 id="imagery">Imagery</h3>
<p>As mentioned before, this is how I was using to include images in the markdown:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">figure</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">  &#x3C;</span><span style="color:#E06C75">img</span><span style="color:#D19A66"> alt</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"The alternative textual representation"</span><span style="color:#D19A66"> src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"path/of/the/image.png"</span><span style="color:#ABB2BF"> /></span></span>
<span class="line"><span style="color:#ABB2BF">  &#x3C;</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">>Some helpful caption&#x3C;/</span><span style="color:#E06C75">figcaption</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">figure</span><span style="color:#ABB2BF">></span></span></code></pre>
<p>And this is how it is with <code>Image</code> React component:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">Image</span></span>
<span class="line"><span style="color:#D19A66">  alt</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"The alternative textual representation"</span></span>
<span class="line"><span style="color:#D19A66">  src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"path/of/the/image.png"</span></span>
<span class="line"><span style="color:#D19A66">  caption</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Some helpful caption"</span></span>
<span class="line"><span style="color:#ABB2BF">/></span></span></code></pre>
<p>That’s simpler right? It may not look absurdly simpler at a glance, but if we take a further look at the <code>Image</code> component we’ll see a whole bunch of cool features and a world of possibilities.</p>
<h3 id="embed-codepen">Embed Codepen</h3>
<p>The API of the React components are made in the way I desire. I don’t have to follow any HTML5 compliant specification or community patterns. Let’s see a more complex example:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#7F848E;font-style:italic">&#x3C;!-- Using Iframe --></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">iframe</span></span>
<span class="line"><span style="color:#D19A66">  height</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"600"</span></span>
<span class="line"><span style="color:#D19A66">  scrolling</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"no"</span></span>
<span class="line"><span style="color:#D19A66">  title</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Card pack"</span></span>
<span class="line"><span style="color:#D19A66">  src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"//codepen.io/bernardodiasc/embed/rdZmjK/?height=600&#x26;theme-id=0&#x26;default-tab=result&#x26;embed-version=2"</span></span>
<span class="line"><span style="color:#D19A66">  frameborder</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"no"</span></span>
<span class="line"><span style="color:#D19A66">  allowtransparency</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"true"</span></span>
<span class="line"><span style="color:#D19A66">  allowfullscreen</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"true"</span></span>
<span class="line"><span style="color:#D19A66">  style</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"width: 100%;"</span></span>
<span class="line"><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">  See the Pen &#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io/bernardodiasc/pen/rdZmjK/"</span><span style="color:#ABB2BF">>Card pack&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">> by Bernardo Dias (&#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io/bernardodiasc"</span><span style="color:#ABB2BF">>@bernardodiasc&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">>) on &#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io"</span><span style="color:#ABB2BF">>CodePen&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">>.</span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">iframe</span><span style="color:#ABB2BF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">&#x3C;!-- Or the recommended way --></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">p</span></span>
<span class="line"><span style="color:#D19A66">  data-height</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"600"</span></span>
<span class="line"><span style="color:#D19A66">  data-theme-id</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"0"</span></span>
<span class="line"><span style="color:#D19A66">  data-slug-hash</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"rdZmjK"</span></span>
<span class="line"><span style="color:#D19A66">  data-default-tab</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"result"</span></span>
<span class="line"><span style="color:#D19A66">  data-user</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"bernardodiasc"</span></span>
<span class="line"><span style="color:#D19A66">  data-embed-version</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"2"</span></span>
<span class="line"><span style="color:#D19A66">  data-pen-title</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Card pack"</span></span>
<span class="line"><span style="color:#D19A66">  class</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"codepen"</span></span>
<span class="line"><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">  See the Pen &#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io/bernardodiasc/pen/rdZmjK/"</span><span style="color:#ABB2BF">>Card pack&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">> by Bernardo Dias (&#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io/bernardodiasc"</span><span style="color:#ABB2BF">>@bernardodiasc&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">>) on &#x3C;</span><span style="color:#E06C75">a</span><span style="color:#D19A66"> href</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://codepen.io"</span><span style="color:#ABB2BF">>CodePen&#x3C;/</span><span style="color:#E06C75">a</span><span style="color:#ABB2BF">>.</span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;/</span><span style="color:#E06C75">p</span><span style="color:#ABB2BF">></span></span>
<span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">script</span><span style="color:#D19A66"> async</span><span style="color:#D19A66"> src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://static.codepen.io/assets/embed/ei.js"</span><span style="color:#ABB2BF">>&#x3C;/</span><span style="color:#E06C75">script</span><span style="color:#ABB2BF">></span></span></code></pre>
<p>So much can be simplified and standardized here:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">Codepen</span></span>
<span class="line"><span style="color:#D19A66">  hash</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"rdZmjK"</span></span>
<span class="line"><span style="color:#D19A66">  height</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"600"</span></span>
<span class="line"><span style="color:#D19A66">  title</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"Card pack"</span></span>
<span class="line"><span style="color:#ABB2BF">/></span></span></code></pre>
<p>Pretty better! Let the React component to handle the general patterns. Let the markdown content simpler.</p>
<h3 id="embed-video">Embed video</h3>
<p>Just one last example :)</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">iframe</span></span>
<span class="line"><span style="color:#D19A66">  width</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"560"</span></span>
<span class="line"><span style="color:#D19A66">  height</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"315"</span></span>
<span class="line"><span style="color:#D19A66">  src</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"https://www.youtube.com/embed/dnzE9ip5U04?rel=0"</span></span>
<span class="line"><span style="color:#D19A66">  frameborder</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"0"</span></span>
<span class="line"><span style="color:#D19A66">  allow</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"encrypted-media"</span></span>
<span class="line"><span style="color:#D19A66">  allowfullscreen</span></span>
<span class="line"><span style="color:#ABB2BF">>&#x3C;/</span><span style="color:#E06C75">iframe</span><span style="color:#ABB2BF">></span></span></code></pre>
<p>To become:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#ABB2BF">&#x3C;</span><span style="color:#E06C75">Video</span><span style="color:#D19A66"> hash</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">"dnzE9ip5U04"</span><span style="color:#FFFFFF"> /</span><span style="color:#ABB2BF">></span></span></code></pre>
<p>Sizing properties will be pretty much the same almost all times for this site use case and then can be optional. This is the same for all other attributes.</p>
<h2 id="how-to-do-such-awesome-thing">How to do such awesome thing?</h2>
<p>Now let’s get to the actual solution!</p>
<p>To make this upgrade in my existing <code>MarkdownRenderer</code> component I made a switch of the <a href="https://github.com/markedjs/marked/">https://github.com/markedjs/marked/</a> lib in favor of <a href="https://github.com/probablyup/markdown-to-jsx">https://github.com/probablyup/markdown-to-jsx</a>.</p>
<p>Honestly, I can’t complain about the previous implementation of this component. It was missing just one feature to provide such awesomeness: the ability to override elements. And that’s one of the coolest features of <strong>markdown-to-jsx</strong>.</p>
<h3 id="code-blocks-syntax-highlight">Code blocks syntax highlight</h3>
<p>Make this move had a drawback regarding the code blocks and syntax highlight. Will explain about below, but because of that, I reconsidered the switching move. At first, I considered implementing the desired feature in the <a href="https://github.com/utatti/react-render-html">https://github.com/utatti/react-render-html</a>, basically allowing the <code>overrides</code> options, the same as the <strong>markdown-to-jsx</strong>. That would require much more time for me, unfortunately, I need to pragmatical here. What makes a bit difficult is that <strong>react-render-html</strong> relies on <a href="https://github.com/inikulin/parse5">https://github.com/inikulin/parse5</a>, and that’s very strict HTML5 spec compliant parser. Anyway, this is still a possibility if I find time for an open source contribution and if the library author desires.</p>
<p>Back on the drawback, it’s actually no big deal. The point is that <strong>markdown-to-jsx</strong> is compatible with <strong>highlight.js</strong> BUT it only adds the code language classes in the <code>code</code> tag. This would require <strong>highlight.js</strong> to parse the code contents on the client side. I didn’t want that, because I have pre-rendered feature in this site and I want to take advantage on that and relieve the client device from extra processing as much as possible (I mean, it’s already hydrating the React app…).</p>
<p>The solution was to override the <code>pre</code> tags with a custom <code>CodeBlock</code> component:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#61AFEF"> CodeBlock</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75;font-style:italic">node</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> props</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> node</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">children</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">props</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> language</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">className</span><span style="color:#C678DD"> ?</span><span style="color:#E5C07B"> props</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">className</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">replace</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">/</span><span style="color:#C678DD">^</span><span style="color:#E06C75">(lang-)/</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">''</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">:</span><span style="color:#98C379"> ''</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> code</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">children</span><span style="color:#56B6C2"> ||</span><span style="color:#98C379"> ''</span></span>
<span class="line"><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> htmlBlock</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> language</span></span>
<span class="line"><span style="color:#C678DD">    ?</span><span style="color:#E5C07B"> hljs</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">highlight</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">language</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">code</span><span style="color:#ABB2BF">).</span><span style="color:#E06C75">value</span></span>
<span class="line"><span style="color:#C678DD">    :</span><span style="color:#E5C07B"> hljs</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">highlightAuto</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">code</span><span style="color:#ABB2BF">).</span><span style="color:#E06C75">value</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#61AFEF"> renderHTML</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">`&#x3C;pre>&#x3C;code class="</span><span style="color:#C678DD">${</span><span style="color:#E5C07B">props</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">className</span><span style="color:#C678DD">}</span><span style="color:#98C379">"></span><span style="color:#C678DD">${</span><span style="color:#E06C75">htmlBlock</span><span style="color:#C678DD">}</span><span style="color:#98C379">&#x3C;/code>&#x3C;/pre>`</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Well, that still relies on <strong>react-render-html</strong> and as noted in the library, <strong>parse5</strong> is a heavyweight library. Luckily, as I said, this site has pre-rendering, it will work with JS disabled (try it). So I’m not much worried about the weight of the JS bundle since it’s not a blocker for the main experience.</p>
<h3 id="the-markdown-renderer-component">The markdown renderer component</h3>
<p>Alright alright, despite that code block syntax highlight situation, everything else had a smooth transition. Here’s how the component render looks like now:</p>
<pre class="astro-code one-dark-pro" style="background-color:#282c34;color:#abb2bf; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#C678DD">class</span><span style="color:#E5C07B"> MarkdownRenderer</span><span style="color:#C678DD"> extends</span><span style="color:#E5C07B"> PureComponent</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  static</span><span style="color:#E06C75"> defaultProps</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#E06C75">    text</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">''</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">  render</span><span style="color:#ABB2BF">() {</span></span>
<span class="line"><span style="color:#C678DD">    const</span><span style="color:#ABB2BF"> { </span><span style="color:#E5C07B">text</span><span style="color:#ABB2BF"> } </span><span style="color:#56B6C2">=</span><span style="color:#E5C07B"> this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">props</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E06C75"> text</span><span style="color:#C678DD"> ?</span><span style="color:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF">      &#x3C;</span><span style="color:#E5C07B">Markdown</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">        children</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">text</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic">        options</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75">          overrides</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">            Icon</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            Image</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            Codepen</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            Video</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">            pre</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">              component</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">CodeBlock</span></span>
<span class="line"><span style="color:#ABB2BF">            }</span></span>
<span class="line"><span style="color:#ABB2BF">          },</span></span>
<span class="line"><span style="color:#ABB2BF">        }</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#ABB2BF">      /></span></span>
<span class="line"><span style="color:#ABB2BF">    ) </span><span style="color:#C678DD">:</span><span style="color:#D19A66"> null</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<p>Notice the <code>overrides</code> options, I can do a lot more with that, it’s really cool and worth to check out the library docs <a href="https://github.com/probablyup/markdown-to-jsx#optionsoverrides---override-any-html-tags-representation">https://github.com/probablyup/markdown-to-jsx#optionsoverrides---override-any-html-tags-representation</a>.</p>
<h2 id="bottom-line">Bottom line</h2>
<p>The data structures on the markup are all about content representation. And the patterns are there to relieve the mental burden of repetitive tasks, such as writing these markup data structures. Templates for markup has always been there, although they are cooler and powerful now in the age of client-side JS rendering libraries.</p>
<p>Simple is better!</p>   </div>  </div>  <div class="disqus" id="disqus_thread" data-astro-cid-r2x3s5wt></div> <script>(function(){const identifier = "2018-04-09-markdown-renderer-component-that-can-render-other-react-components";
const title = "Markdown renderer component that can render other React components";
const url = "https://bernardodiasdacruz.com/2018/04/09/markdown-renderer-component-that-can-render-other-react-components/";

  if (window.location.hostname !== 'localhost') {
    window.disqus_config = function () {
      this.page.url = url;
      this.page.identifier = identifier;
      this.page.title = title;
    };
    const d = document;
    const s = d.createElement('script');
    s.src = 'https://bernardodiasc.disqus.com/embed.js';
    s.setAttribute('data-timestamp', String(+new Date()));
    (d.head || d.body).appendChild(s);
  }
})();</script>   </div> </article> </main> <script>
      if (window.location.hostname !== 'localhost') {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-10219275-4');
      }
    </script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10219275-4"></script> </body> </html> 